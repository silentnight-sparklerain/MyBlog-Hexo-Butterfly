---
title: 计算机组成原理（1）：概论
categories:
  - Programming
  - Theory
comments: true
description: 计算机组成原理第一部分：概论
series: 计算机组成原理笔记
hide: true
mathjax: false
katex: true
highlight_shrink: true
cover: /img/posts/计算机组成原理.png
abbrlink: 77b8fe83
date: 2025-12-19 00:00:00
updated: 2025-12-19 00:00:00
keywords:
top_img:
aside:
aplayer:
---

## 第1章 计算机系统概论

### 1.1 计算机系统简介

计算机系统由**硬件**和**软件**两大部分组成。计算机性能的好坏取决于“软”、“硬”件功能的总和。

#### 1.1.1 计算机的软硬件概念

**1. 硬件 (Hardware)**
*   **定义**：计算机的实体部分，由看得见、摸得着的各种电子元器件（如光、电、机设备）组成。
*   **例子**：主机、外部设备等。
*   **核心作用**：提供物质基础。

**2. 软件 (Software)**
*   **定义**：看不见、摸不着的，由人们事先编制的具有各类特殊功能的程序组成。
*   **载体**：通常存放在各类媒体（RAM、ROM、磁盘、光盘等）中。
*   **核心作用**：
    *   充分发挥硬件功能，提高工作效率。
    *   局部模拟人类思维活动。
*   **理解**：如果没有软件，硬件就是一堆废铁；软件必须依托硬件才能发挥作用。

**3. 软件的分类**
*   **系统软件 (System Software)**：
    *   **作用**：管理整个计算机系统，监视服务，使系统资源得到合理调度，高效运行。
    *   **包含**：标准程序库、语言处理程序（如汇编程序、编译程序）、操作系统（批处理、分时、实时）、服务程序（诊断、调试）、数据库管理系统、网络软件等。
*   **应用软件 (Application Software)**：
    *   **作用**：用户根据任务需要所编制的各种程序。
    *   **包含**：科学计算程序、数据处理程序、过程控制程序、事务管理程序等。

#### 1.1.2 计算机系统的层次结构

计算机系统是一个多级层次结构，从用户到硬件分为不同层级。

**1. 早期与现代的编程语言层次**
*   **机器语言 (Machine Language)**：
    *   早期计算机只有机器语言，用二进制代码（0和1）编写。
    *   **缺点**：程序员必须熟悉硬件细节，编程难度大，易出错。
    *   **实际机器 ($M_1$)**：直接执行机器语言的机器。
*   **汇编语言 (Assembly Language)**：
    *   20世纪50年代出现，用符号（如ADD, SUB）代替二进制代码。
    *   **虚拟机器 ($M_2$)**：硬件无法直接识别汇编，需要通过**汇编程序**翻译成机器语言。我们将这台具有翻译功能的计算机看作一台虚拟的机器。
*   **高级语言 (High Level Language)**：
    *   20世纪60年代出现，如FORTRAN, Pascal等。语法接近人类习惯，不依赖具体机器硬件。
    *   **虚拟机器 ($M_3$)**：需要通过**翻译程序**将高级语言翻译成机器语言。

![图 1.3 具有两级层次结构的计算机系统](/img/post_article/计算机组成原理/1-3.png)

> *   **描述**：图中展示了“实际机器 $M_1$”在底层，上方是“虚拟机 $M_2$（汇编语言机器）”。
> *   **原理**：用户将汇编程序输入给 $M_2$，$M_2$ 将其翻译成机器语言传给 $M_1$ 执行。

**2. 翻译程序的两种方式**
通常将高级语言翻译成机器语言的软件称为翻译程序，分为两类：
*   **编译程序 (Compiler)**：将源程序（高级语言）**一次性全部**翻译成目标程序（机器语言），然后再执行。
*   **解释程序 (Interpreter)**：将源程序的一条语句翻译成机器语言并**立即执行**，紧接着翻译并执行下一句。

**3. 多级层次结构**
现代计算机系统通常被划分为五个层级（由下至上）：
1.  **微程序机器 ($M_0$)**：由硬件直接执行微指令。
2.  **传统机器 ($M_1$)**：用微程序解释机器指令（即我们通常理解的机器语言层）。
3.  **操作系统机器 ($M_2$)**：由操作系统程序实现，提供资源管理和控制功能（软硬件交界）。
4.  **汇编语言机器 ($M_3$)**：将汇编语言翻译成机器语言。
5.  **高级语言机器 ($M_4$)**：将高级语言翻译成汇编或机器语言。

![图 1.5 具有四级层次结构的计算机系统](/img/post_article/计算机组成原理/1-5.png)

> *   **描述**：展示了从下到上的层级：微程序机器 $M_0$ $\rightarrow$ 传统机器 $M_1$ $\rightarrow$ 虚拟机 $M_2$（汇编） $\rightarrow$ 虚拟机 $M_3$（高级语言）。
> *   **注**：实际上在 $M_1$ 和 $M_2$ 之间通常还有一层**操作系统**。

**4. 软硬件的逻辑功能等价性**
*   **概念**：某一功能既可以用硬件实现，也可以用软件实现。
*   **固件 (Firmware)**：将软件永恒地存储在只读存储器（ROM）中，称为固件。这是软硬件交界面向上层发展的体现（软件硬件化）。

#### 1.1.3 计算机组成和计算机体系结构

这两个概念经常被混淆，需严格区分：

**1. 计算机体系结构 (Computer Architecture)**
*   **定义**：指那些能够被**程序员**（机器语言或汇编语言程序员）所见到的计算机系统的**属性**。
*   **内容**：指令集、数据类型、存储器寻址技术、I/O机理等（抽象属性）。
*   **理解**：它决定了这台机器“能做什么”，是概念性的结构。比如“有没有乘法指令”。

**2. 计算机组成 (Computer Organization)**
*   **定义**：指如何**实现**计算机体系结构所体现的属性。
*   **内容**：包含了许多对程序员透明（不可见）的硬件细节。
*   **理解**：它决定了这台机器“怎么做”。比如“乘法指令是用专门的乘法电路实现，还是用加法器循环累加实现”。

**总结**：
*   同一系列的计算机（如IBM System/370），体系结构可以相同，但不同型号的计算机组成（硬件实现）可能有很大差异（导致价格和性能差异）。
*   **体系结构**是“设计规范”，**组成**是“具体实现”。

### 1.2 计算机的基本组成

#### 1.2.1 冯·诺依曼计算机的特点

1945年，冯·诺依曼提出“存储程序”概念，以此为基础的计算机称为冯·诺依曼机。其特点如下：
1.  **五大部件**：计算机由**运算器**、**存储器**、**控制器**、**输入设备**和**输出设备**五大部件组成。
2.  **同等地位**：指令和数据以同等地位存放在存储器内，并可按地址寻访。
3.  **二进制**：指令和数据均用二进制数表示。
4.  **指令结构**：指令由**操作码**（表示操作性质）和**地址码**（表示操作数位置）组成。
5.  **顺序执行**：指令在存储器内按顺序存放，通常按顺序执行。
6.  **以运算器为中心**：早期的冯·诺依曼机以**运算器**为中心（现代计算机已转化为以**存储器**为中心）。
7.  **存储程序**（**核心特征**）：具有存储程序特征的计算机统称为冯·诺依曼计算机。

![图 1.7 冯·诺依曼计算机结构框图](/img/post_article/计算机组成原理/1-7.png)

#### 1.2.2 计算机的硬件框图

**1. 五大部件的功能**
*   **运算器**：完成算术运算（加减乘除）和逻辑运算（与或非），中间结果暂存在运算器内。
*   **存储器**：存放数据和程序。
*   **控制器**：控制、指挥程序和数据的输入、运行以及处理运算结果（神经中枢）。
*   **输入设备**：将人们熟悉的信息形式（图、文、声）转换为机器能识别的信息形式（二进制）。
*   **输出设备**：将机器运算结果转换为人们熟悉的信息形式。

**2. 现代计算机的结构划分**
由于集成电路技术的发展，部件界限发生变化：
*   **CPU (中央处理器)** = 运算器 + 控制器。
*   **I/O设备** = 输入设备 + 输出设备。
*   **主机** = CPU + 主存储器。
*   **外部设备** = I/O设备 + 辅助存储器（如硬盘）。

![图 1.9 现代计算机的组成框图](/img/post_article/计算机组成原理/1-9.png)

> *   **描述**：
>     *   **主机**框内包含：CPU（含ALU和CU）和主存储器。
>     *   **I/O设备**通过总线与主机连接。
>     *   箭头指示：实线代表数据流，虚线代表控制流。

**3. 核心部件缩写与功能**
*   **ALU (Arithmetic Logic Unit)**：算术逻辑单元，负责运算。
*   **CU (Control Unit)**：控制单元，负责解释指令并发出命令。
*   **主存 (Main Memory)**：直接与CPU交换信息。
*   **辅存**：又称外存，需调入主存后才能被CPU访问。

#### 1.2.3 计算机的工作步骤

用计算机解决问题通常包含：建立数学模型 $\rightarrow$ 确定计算方法 $\rightarrow$ 编制解题程序。

**1. 程序的存储与指令格式**
*   程序由指令组成。
*   **指令格式**：[ 操作码 ] [ 地址码 ]
    *   **操作码**：做什么（如加、乘、取数）。
    *   **地址码**：数据在哪（内存地址）。

**2. 计算机的工作过程（细化）**

为了理解工作原理，需要剖析细化的计算机组成框图。

![图 1.11 细化的计算机组成框图](/img/post_article/计算机组成原理/1-11.png)

> *   **描述**：
>     *   **主存储器**：包含存储体M、MAR、MDR。
>     *   **运算器**：包含ACC、MQ、X、ALU。
>     *   **控制器**：包含PC、IR、CU。

**(1) 主存储器 (Main Memory)**
*   **存储元/存储元件**：存放一位二进制代码（0或1）的物理器件。
*   **存储单元**：由若干个存储元件组成，存放一串二进制代码（称为一个**存储字**）。
*   **存储字长**：存储单元中二进制代码的位数（如8位、16位、32位）。
*   **地址**：每个存储单元都有一个唯一的编号，称为地址。
*   **访存方式**：按地址存取（写入或读出）。
*   **重要寄存器**：
    *   **MAR (Memory Address Register)**：存储器地址寄存器。用来存放欲访问的存储单元的**地址**。
        *   *理解*：MAR的位数反映了存储单元的个数（如10位地址线能表示 $2^{10}=1024$ 个单元）。
    *   **MDR (Memory Data Register)**：存储器数据寄存器。用来存放从存储体取出或准备存入的**数据/指令**。
        *   *理解*：MDR的位数反映了存储字长（如16位）。

**(2) 运算器**
运算器最少包括3个寄存器和一个ALU：
*   **ACC (Accumulator)**：累加器。
*   **MQ (Multiplier-Quotient Register)**：乘商寄存器。
*   **X**：操作数寄存器。
*   **ALU**：算术逻辑单元，核心电路。

*不同运算时寄存器的数据分布（以加、减、乘、除为例）：*
*   **加法**：ACC(被加数) + X(加数) $\rightarrow$ ACC(和)
*   **减法**：ACC(被减数) - X(减数) $\rightarrow$ ACC(差)
*   **乘法**：ACC(被乘数高位,初始0) & MQ(被乘数/乘数) $\times$ X(被乘数) $\rightarrow$ ACC(积高位) & MQ(积低位) *(注：此处书中描述略微复杂，核心是ACC和MQ级联存放双字长结果)*
*   **除法**：ACC(被除数) $\div$ X(除数) $\rightarrow$ MQ(商) & ACC(余数)

**(3) 控制器**
控制器是计算机的神经中枢，由以下部分组成：
*   **PC (Program Counter)**：程序计数器。用来存放**当前欲执行指令的地址**。具有自动加1的功能（自动指向下一条指令）。
*   **IR (Instruction Register)**：指令寄存器。用来存放**当前的指令**（包括操作码和地址码）。
*   **CU (Control Unit)**：控制单元。分析指令并发出控制信号。

**(4) 一条指令的执行全过程（取指、分析、执行）**
以“取数”指令为例（将内存中某数据取到ACC）：
1.  **取指阶段**：
    *   PC将指令地址送给MAR。
    *   主存根据MAR读取指令，送入MDR。
    *   MDR将指令送入IR。
    *   (同时PC+1，指向下一条)。
2.  **分析阶段**：
    *   IR将操作码送给CU进行分析（译码）。
    *   IR将地址码送给MAR（准备取数据）。
3.  **执行阶段**：
    *   主存根据MAR读取数据，送入MDR。
    *   MDR将数据送入ACC。

所有指令都遵循：**取指令 $\rightarrow$ 分析指令 $\rightarrow$ 执行指令** 的循环过程。

**(5) I/O子系统**
*   I/O设备通过**接口**与主机联系。
*   接收CU发出的控制命令，完成操作。

### 1.3 计算机硬件的主要技术指标

#### 1.3.1 机器字长

*   **定义**：CPU**一次**能处理数据的位数。
*   **关联**：通常与CPU的**寄存器位数**有关。
*   **影响**：
    *   **精度**：字长越长，数的表示范围越大，精度越高。
    *   **速度**：字长越短，处理长数据时需要多次运算，速度变慢。
    *   **造价**：字长影响硬件（如ALU、总线）的复杂度。

#### 1.3.2 存储容量

*   **定义**：存储器中存放二进制代码的总位数。
*   **计算公式**：
    $$ \text{存储容量} = \text{存储单元个数} \times \text{存储字长} $$
*   **现代描述**：通常以**字节 (Byte, B)** 为单位。1 Byte = 8 bit。
    *   MAR的位数决定地址空间大小（如16位地址 = $2^{16} = 64\text{K}$ 单元）。
    *   例如：MAR 16位，MDR 32位。容量 = $64\text{K} \times 32\text{位}$。转化为字节需除以8。
*   **单位换算**：$1\text{K} = 2^{10} = 1024$，$1\text{M} = 2^{20}$，$1\text{G} = 2^{30}$。

#### 1.3.3 运算速度

衡量运算速度有多种指标，从早期到现代演变如下：
1.  **早期**：用完成一次加法或乘法的时间衡量（不合理，因为不同指令耗时不同）。
2.  **吉普森 (Gibson) 法**：综合考虑每条指令的执行时间及其在程序中出现的概率（加权平均）。
    $$ T_M = \sum (f_i \times t_i) $$
    ($f_i$为百分比，$t_i$为执行时间)
3.  **MIPS (Million Instructions Per Second)**：每秒执行百万条指令。
    *   单位：百万条/秒。
4.  **CPI (Cycle Per Instruction)**：执行一条指令所需的**时钟周期数**。
    *   这是衡量微观效率的重要指标。
5.  **FLOPS (Floating Point Operations Per Second)**：每秒浮点运算次数。
    *   用于科学计算领域，衡量浮点数处理能力。

## 第2章 计算机的发展及应用

### 2.1 计算机的发展史

电子计算机从最初的军事计算工具，演变成了改变人类社会结构的核心技术。

#### 2.1.1 计算机的产生和发展

**1. 第一代电子管计算机**
*   **ENIAC (1946年)**：世界上第一台电子数字积分机和计算机。
    *   **背景**：二战期间美国国防部为了解决新武器弹道计算问题而研制。
    *   **特点**：采用**电子管**作为基本元件（用了18000多个），十进制运算。
    *   **缺点**：体积庞大、功耗极高、使用极不方便（编程需要手工拔插电缆和搬动开关）。
    *   **意义**：比机械计算机快得多，标志着计算工具进入崭新时代。

**2. 存储程序概念的提出**
*   **提出者**：冯·诺依曼 (Von Neumann) 在EDVAC计划中首次提出。
*   **核心概念**：**存储程序**。即将程序（指令）和数据一起存放在存储器中。
*   **IAS计算机**：冯·诺依曼设计的存储程序计算机原型，虽未最早问世，但确立了现代通用计算机的结构（冯·诺依曼结构）。

![图 2.1 计算机结构](/img/post_article/计算机组成原理/2-1.png)

> *   **描述**：图中展示了现代计算机的雏形。核心部分包括：
>     *   **主存储器**：中间部分，同时存放指令和数据。
>     *   **算逻部件**：右上方，负责二进制运算。
>     *   **程序控制部件**：右下方，负责解释指令并控制执行。
>     *   **I/O设备**：右侧，由控制部件操作，负责输入输出。
> *   **原理**：数据和指令在各部件间流动，由控制器统一指挥。

**3. 计算机发展的四个时代**
根据**物理器件**的不同，计算机发展分为四代：
1.  **第一代 (1946-1957)**：**电子管**计算机。体积大，耗电，速度慢（几千至几万次/秒）。使用机器语言、汇编语言。
2.  **第二代 (1958-1964)**：**晶体管**计算机。
    *   **变革**：晶体管代替了电子管。体积变小，功耗降低，可靠性提高。
    *   **技术**：出现了高级语言（FORTRAN），有了操作系统雏形。
    *   **问题**：虽然元件小了，但需要手工将成千上万个晶体管焊接到电路板上，工艺复杂，焊点多导致可靠性受限。
3.  **第三代 (1965-1971)**：**集成电路 (IC)** 计算机。
    *   **中小规模集成电路 (SSI/MSI)**：利用光刻技术，将成百上千个电子元件集成在一块微小的硅片上。
    *   **代表**：IBM System/360（系列机概念，打破了体系结构的约束，不同型号软件兼容）和 DEC PDP-8（总线结构，迷你机）。
4.  **第四代 (1972-现在)**：**大规模 (LSI) 和超大规模集成电路 (VLSI)** 计算机。
    *   一个芯片上能集成上万甚至数亿个晶体管。
    *   PC元年：1981年8月12日，推出第一台微型计算机。

#### 2.1.2 微型计算机的出现和发展

**1. 微处理器的诞生**
*   **背景**：集成电路技术将**控制单元**和**算逻单元**集成到一个芯片上，制成了**微处理器**（CPU芯片）。
*   **里程碑**：1971年，Intel推出世界上第一个4位微处理器 **Intel 4004**。

**2. 摩尔定律 (Moore's Law)**
*   **定义**：Gordon Moore 提出，微芯片上集成的晶体管数目每3年翻两番（通常也被表述为每18-24 months性能翻倍）。
*   **验证**：从Intel 4004 到 Pentium 系列，基本印证了这一规律。

**3. 微处理器的发展阶段**
*   **初期**：4位、8位（如Intel 8080, Z80）。用于早期微机（如Apple II）。
*   **16位**：Intel 8086/8088。IBM PC选用了8088，确立了x86架构的统治地位。
*   **32位**：Intel 80386。引入虚拟存储器机制。Pentium系列引入了**超标量**流水线技术。
*   **64位**：现代处理器主流。

**4. 提升性能的瓶颈与对策**
*   **功耗墙**：一味提高主频（速度）会导致功耗和发热剧增，散热成为难题。
*   **线延迟**：芯片内部线路延迟影响速度。
*   **存储墙**：处理器速度每年增长50%，但存储器速度增长缓慢。处理器大部分时间在“等”内存数据。
*   **解决方案**：
    1.  **指令级并行 (ILP)**：超标量、分支预测等技术。
    2.  **线程/进程级并行 (TLP)**：多核处理器 (CMP)、多线程技术。
    3.  **存储体系改进**：多级Cache（高速缓存）、片内内存。

#### 2.1.3 软件技术的兴起和发展

软件和硬件互为动力，共同发展。没有软件，硬件是废铁；没有硬件，软件是幻想。

**1. 编程语言的演变**
*   **机器语言**：直接用二进制代码（0/1）编程。难写、难读、难改，依赖具体机器。
*   **汇编语言**：用符号代替二进制码（如 ADD 代表加法）。需要**汇编程序**翻译。
*   **高级语言**：
    *   **面向过程**：FORTRAN（科学计算）、Pascal（结构化）。
    *   **面向对象**：C++、Java（适应网络环境）。
    *   需要**编译程序**或**解释程序**翻译成机器语言。

**2. 系统软件的发展**
*   **操作系统 (OS)**：管理软硬件资源，提供人机交互界面（DOS, Windows, UNIX）。
*   **数据库管理系统 (DBMS)**：管理大量有组织的数据。

**3. 软件开发的特点**
*   **周期长**：规模庞大，需要多人协作。
*   **成本高**：硬件成本不断下降，软件成本（人工）不断上升。
*   **质量检测难**：软件往往发布后还需要不断修补Bug（补丁）。

### 2.2 计算机的应用

计算机已从实验室走向家庭，应用领域极广。

#### 2.2.1 科学计算和数据处理

**1. 科学计算**
*   **特点**：计算量大，数值变化范围大。
*   **应用**：天气预报（需要极高的运算速度）、航空航天、核物理。

**2. 数据处理**
*   **特点**：数据量巨大，计算逻辑相对简单（分类、排序、统计）。
*   **应用**：企业财务、人口统计、图书检索、办公自动化。

#### 2.2.2 工业控制和实时控制

**1. 工业控制**
*   **流程**：传感器采集物理信号 $\rightarrow$ 模数转换 $\rightarrow$ 计算机处理偏差 $\rightarrow$ 驱动执行机构。
*   **趋势**：从封闭系统走向开放系统，利用网络实现控管一体化。

**2. 实时控制**
*   **特点**：必须在严格规定的时间内完成处理并做出反应。
*   **应用**：导弹制导、航天器发射、核反应堆控制。

#### 2.2.3 网络技术的应用

网络技术的初衷是**资源共享**。

**1. 电子商务 (E-commerce)**
*   利用Internet改变传统的商业模式（如B2B, B2C）。
*   打破地域限制，降低成本，实现电子支付。

**2. 网络教育**
*   打破时空限制，实现终身教育和资源共享。

**3. 敏捷制造**
*   利用网络建立**虚拟企业**。不同公司通过网络临时结盟，各展所长，迅速响应市场需求，任务完成后解散。

#### 2.2.4 虚拟现实 (Virtual Reality, VR)

*   **定义**：利用计算机生成一种模拟环境（视觉、听觉、触觉），使用户“投入”到该环境中并进行交互。
*   **应用**：
    *   **虚拟演播室**：真人和虚拟背景合成。
    *   **仿真训练**：飞行员驾驶模拟（安全、省钱）。

#### 2.2.5 办公自动化和管理信息系统

*   **办公自动化 (OA)**：用电脑代替笔墨纸砚，处理文字、报表、邮件。
*   **管理信息系统 (MIS)**：企业内部的人、财、物管理，辅助决策。

#### 2.2.6 CAD/CAM/CIMS

这是现代工业生产的核心技术：
*   **CAD (计算机辅助设计)**：用电脑画图、模拟、设计产品。
*   **CAM (计算机辅助制造)**：用电脑控制数控机床加工产品。
*   **CIMS (计算机集成制造系统)**：将设计、制造、管理、销售全过程集成起来，优化运行。

#### 2.2.7 多媒体技术

*   **定义**：计算机综合处理文字、图形、图像、音频、视频等多种媒体信息。
*   **关键**：将各种模拟信号数字化，并进行压缩和合成。

#### 2.2.8 人工智能 (AI)

*   **定义**：用计算机模拟人的智能（感知、推理、学习）。
*   **领域**：
    *   **模式识别**：人脸识别、语音识别、指纹识别。
    *   **专家系统**：将专家的知识存入库，模拟专家解决专业问题（如医疗诊断）。
    *   **机器人**：具备感知和动作能力的智能机器。

### 2.3 计算机的展望

#### 计算机的发展趋势
1.  **极高速度**：追求超级计算机（Supercomputer）。
2.  **微型化/网络化**：嵌入式设备、物联网。

#### 突破硅芯片的物理极限
传统硅芯片受物理定律限制（光速、原子尺寸、散热），科学家正在探索新的计算模型（接力棒）：

**1. 光计算机**
*   **原理**：用**光子**代替电子进行运算和存储。
*   **优势**：光速传播，互不干扰，高并行性。
*   **难点**：光学晶体管庞大，目前难以微型化。

**2. 生物计算机 (DNA计算机)**
*   **原理**：利用DNA分子间的生化反应进行运算。
*   **优势**：巨大的存储密度和并行性。
*   **难点**：目前还处于试管液体阶段，速度慢，操作笨拙。

**3. 量子计算机**
*   **原理**：利用原子的量子特性（叠加态）。量子位可以是0和1的叠加。
*   **优势**：在特定算法（如大数分解）上具有传统计算机无法比拟的指数级速度。
*   **前景**：被认为是最有希望突破硅芯片极限的技术。

**4. 普及与人性化**
未来的计算机将更加**不可见**（嵌入在环境中），更加**人性化**（听懂语言、看懂手势），甚至具备类似人脑的自适应和学习能力。