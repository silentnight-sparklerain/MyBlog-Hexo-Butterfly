---
title: 离散数学（1）：数理逻辑
categories:
  - Study
  - Math
comments: true
description: 离散数学第一部分：数理逻辑
series: 离散数学笔记
hide: true
mathjax: false
katex: true
highlight_shrink: true
cover: /img/posts/离散数学.avif
abbrlink: '14e38516'
date: 2025-11-26 00:00:00
updated: 2025-11-26 00:00:00
keywords:
top_img:
aside:
aplayer:
---
## 第1章 命题逻辑的基本概念

### 1.1 命题与联结词

#### 1. 命题的定义
*   **命题 (Proposition)**：是一个**陈述句**，并且它所表达的判断结果**要么为真，要么为假**，二者必居其一，不可兼得。
    *   *理解要点*：感叹句、祈使句、疑问句都不是命题；无法判断真假的陈述句（如“我在说谎”）也不是命题。
*   **真值 (Truth Value)**：命题的判断结果。
    *   **真 (True)**：记作 $1$（或 $T$）。
    *   **假 (False)**：记作 $0$（或 $F$）。

#### 2. 命题的分类
*   **原子命题 (Atomic Proposition) / 简单命题**：不能再分解成更简单命题的命题。
*   **复合命题 (Compound Proposition)**：由原子命题通过**联结词**联结而成的命题。

#### 3. 五种基本联结词
为了将自然语言转化为数学符号，定义了以下5种逻辑运算。假设 $p, q$ 为两个命题：

**(1) 否定 (Negation)**
*   **符号**：$\neg p$ （读作“非 $p$”）
*   **定义**：当 $p$ 为真时，$\neg p$ 为假；当 $p$ 为假时，$\neg p$ 为真。
*   **逻辑关系**：取反。

**(2) 合取 (Conjunction)**
*   **符号**：$p \wedge q$ （读作“$p$ 并且 $q$”）
*   **定义**：当且仅当 $p$ 和 $q$ **同时为真**时，$p \wedge q$ 才为真；否则为假。
*   **逻辑关系**：相当于电路中的“串联”或逻辑“与”。

**(3) 析取 (Disjunction)**
*   **符号**：$p \vee q$ （读作“$p$ 或 $q$”）
*   **定义**：只要 $p$ 和 $q$ 中**有一个为真**，$p \vee q$ 就为真；只有当两者都为假时，才为假。
*   **注意**：这是“相容或”（Inclusive OR），即允许两者同时为真。

**(4) 蕴涵 (Implication)**
*   **符号**：$p \rightarrow q$ （读作“如果 $p$，则 $q$”）
*   **术语**：$p$ 称为**前件**，$q$ 称为**后件**。
*   **定义**：**只有当 $p$ 为真且 $q$ 为假时，结果才为假**；其他情况结果均为真。
    *   *记忆口诀*：一真推一假，结果才是假；其余全是真。
*   **逻辑关系**：
    *   $p$ 是 $q$ 的**充分条件**。
    *   $q$ 是 $p$ 的**必要条件**。

**(5) 等价 (Equivalence)**
*   **符号**：$p \leftrightarrow q$ （读作“$p$ 当且仅当 $q$”）
*   **定义**：当 $p$ 和 $q$ 的**真值相同**（同真或同假）时，结果为真；真值不同时，结果为假。
*   **逻辑关系**：$p$ 与 $q$ 互为**充分必要条件**。

#### 4. 联结词的运算表（真值表汇总）
| $p$ | $q$ | $\neg p$ | $p \wedge q$ | $p \vee q$ | $p \rightarrow q$ | $p \leftrightarrow q$ |
| :-: | :-: | :------: | :----------: | :--------: | :---------------: | :-------------------: |
|  0  |  0  |    1     |      0       |     0      |         1         |           1           |
|  0  |  1  |    1     |      0       |     1      |         1         |           0           |
|  1  |  0  |    0     |      0       |     1      |         0         |           0           |
|  1  |  1  |    0     |      1       |     1      |         1         |           1           |

### 1.2 命题公式及其赋值

#### 1. 基本符号与术语
*   **命题常项**：真值确定的命题（真值只能是 1 或 0）。
*   **命题变项 (Propositional Variable)**：真值可以变化的陈述句变量，通常用 $p, q, r$ 等表示。命题变项不是命题，只有被赋值后才是命题。
*   **元语言符号**：用大写字母（如 $A, B$）代表任意复杂的公式，而不是具体的原子命题。

#### 2. 合式公式 (Well-formed Formula, wff)
命题公式是按照严格语法规则构成的字符序列，定义如下（递归定义）：
1.  **基础**：单个命题变项或命题常项是合式公式。
2.  **归纳**：如果 $A$ 是合式公式，则 $(\neg A)$ 是合式公式。
3.  **组合**：如果 $A, B$ 是合式公式，则 $(A \wedge B)$、$(A \vee B)$、$(A \rightarrow B)$、$(A \leftrightarrow B)$ 都是合式公式。
4.  **封闭性**：只有通过以上有限次步骤生成的字符序列才是合式公式。

*   **子公式**：公式 $A$ 中作为其组成部分的合式公式，称为 $A$ 的子公式。

#### 3. 运算优先级
当公式中省略括号时，为了消除歧义，规定联结词的优先顺序如下（从高到低）：
1.  括号 $()$
2.  否定 $\neg$
3.  合取 $\wedge$
4.  析取 $\vee$
5.  蕴涵 $\rightarrow$
6.  等价 $\leftrightarrow$

*注意：同级运算通常按照从左到右的顺序进行。书中特别规定 $\wedge$ 优先于 $\vee$（注：不同教材对此规定可能不同，本书规定合取优先于析取）。*

#### 4. 公式的层次
为了描述公式的复杂程度，定义公式的层：
*   **0层公式**：单个命题变项或常项。
*   **$n+1$层公式**：
    *   如果 $A$ 是 $n$ 层，则 $\neg A$ 是 $n+1$ 层（前提是 $\neg A$ 不是更低层的）。
    *   如果 $A, B$ 分别是 $i$ 层和 $j$ 层，则 $A \wedge B$ 等组合公式是 $\max(i, j) + 1$ 层。
*   *通俗解释*：层数就是运算嵌套的最深深度。

#### 5. 赋值与解释 (Assignment / Interpretation)
*   **赋值/解释**：给公式 $A$ 中的所有命题变项 $(p_1, p_2, ..., p_n)$ 指定一组真值（1或0），称为对公式 $A$ 的一个赋值或解释。
*   **成真赋值**：使公式 $A$ 的真值为 $1$ 的赋值。
*   **成假赋值**：使公式 $A$ 的真值为 $0$ 的赋值。
*   **赋值数量**：如果一个公式包含 $n$ 个不同的命题变项，那么它共有 $2^n$ 种不同的赋值组合。

#### 6. 真值表 (Truth Table)
将公式在所有可能的赋值（$2^n$ 种）下的真值列成表格，就是真值表。
*   **构造步骤**：
    1.  列出所有变项的 $2^n$ 种真值组合（通常按二进制从 $00\dots0$ 到 $11\dots1$ 排列）。
    2.  按照运算优先级，计算公式各部分的真值。
    3.  得出整个公式在每种情况下的最终真值。

#### 7. 命题公式的分类
根据真值表的最后结果，可以将公式分为三类：
1.  **重言式 (Tautology) / 永真式**：在**所有**赋值下，公式真值都为 $1$。
2.  **矛盾式 (Contradiction) / 永假式**：在**所有**赋值下，公式真值都为 $0$。
3.  **可满足式 (Satisfiable)**：**至少存在一个**赋值，使公式真值为 $1$。

*   **三者关系**：
    *   重言式一定是可满足式。
    *   重言式的否定是矛盾式。
    *   矛盾式的否定是重言式。
    *   非重言式的可满足式（即有时真有时假），否定后仍是非重言式的可满足式。

#### 8. 代入与哑元
*   **哑元**：如果在公式 $A$ 中含有变项 $p$，但 $A$ 的真值与 $p$ 的取值完全无关，则称 $p$ 为 $A$ 的哑元（虚变元）。
    *   *解释*：实际上并不起作用的变量。
*   **等值/相同真值表**：如果两个公式 $A$ 和 $B$ 在所有相同的赋值下真值都相同，则称它们具有相同的真值表。这即使它们包含的变项集合不完全一致（由于哑元的存在）也是适用的。

## 第2章 命题逻辑等值演算

### 2.1 等值式

本节主要讨论如何判断两个命题公式是否在逻辑上完全等效。

#### 1. 等值的定义
*   **概念**：如果公式 $A$ 和 $B$ 包含相同的 $n$ 个命题变项，且对于这 $n$ 个变项的所有 $2^n$ 种真值赋值，$A$ 与 $B$ 的真值都相同，则称 $A$ 与 $B$ 是**等值**的。
*   **记法**：记作 $A \Leftrightarrow B$。
*   **与重言式的关系**：$A \Leftrightarrow B$ 当且仅当等价式 $A \leftrightarrow B$ 是重言式（永真式）。
*   **符号区别**：
    *   $\leftrightarrow$：是**逻辑联结词**（运算符号），属于对象语言，用于连接两个命题构成新命题。
    *   $\Leftrightarrow$：是**元语言符号**（关系符号），用于描述两个公式之间的等值关系，不出现在逻辑公式内部。
    *   $=$：通常用于数值或代数的相等，不要与逻辑等值混淆。

#### 2. 等值演算与置换规则
判断等值的方法除了使用**真值表法**外，更常用的是**等值演算法**，即利用已知的等值式推导出新的等值式。

*   **置换规则**：
    如果在公式 $A$ 中，用一个与子公式 $\Phi$ 等值的公式 $\Phi'$ 去替换 $\Phi$，得到新的公式 $B$，那么 $A \Leftrightarrow B$。
    *   *解释*：把公式里的一部分换成和它意思完全一样的东西，整个公式的意思不变。
*   **代入规则**：
    如果 $A \Leftrightarrow B$ 是一个重言式（等值式），用任意公式 $C$ 替换 $A$ 和 $B$ 中出现的同一个命题变项（如 $p$），得到的新等式仍然成立。

#### 3. 16组重要的等值式模式（基本定律）
这些定律是等值演算的基础，必须熟记。

1.  **双重否定律**：
    $$ \neg\neg A \Leftrightarrow A $$
2.  **幂等律**：
    $$ A \lor A \Leftrightarrow A $$
    $$ A \land A \Leftrightarrow A $$
3.  **交换律**：
    $$ A \lor B \Leftrightarrow B \lor A $$
    $$ A \land B \Leftrightarrow B \land A $$
4.  **结合律**：
    $$ (A \lor B) \lor C \Leftrightarrow A \lor (B \lor C) $$
    $$ (A \land B) \land C \Leftrightarrow A \land (B \land C) $$
5.  **分配律** (非常重要)：
    $$ A \lor (B \land C) \Leftrightarrow (A \lor B) \land (A \lor C) \quad (\lor \text{对} \land \text{的分配}) $$
    $$ A \land (B \lor C) \Leftrightarrow (A \land B) \lor (A \land C) \quad (\land \text{对} \lor \text{的分配}) $$
6.  **德·摩根律** (De Morgan's Laws)：
    $$ \neg(A \lor B) \Leftrightarrow \neg A \land \neg B $$
    $$ \neg(A \land B) \Leftrightarrow \neg A \lor \neg B $$
    *   *解释*：否定进括号，符号要变号（$\lor$ 变 $\land$，$\land$ 变 $\lor$）。
7.  **吸收律**：
    $$ A \lor (A \land B) \Leftrightarrow A $$
    $$ A \land (A \lor B) \Leftrightarrow A $$
8.  **零律** (支配律)：
    $$ A \lor 1 \Leftrightarrow 1 $$
    $$ A \land 0 \Leftrightarrow 0 $$
9.  **同一律**：
    $$ A \lor 0 \Leftrightarrow A $$
    $$ A \land 1 \Leftrightarrow A $$
10. **排中律**：
    $$ A \lor \neg A \Leftrightarrow 1 $$
11. **矛盾律**：
    $$ A \land \neg A \Leftrightarrow 0 $$
12. **蕴涵等值式** (消除蕴涵号的关键)：
    $$ A \to B \Leftrightarrow \neg A \lor B $$
13. **等价等值式** (消除等价号的关键)：
    $$ A \leftrightarrow B \Leftrightarrow (A \to B) \land (B \to A) $$
    $$ A \leftrightarrow B \Leftrightarrow (\neg A \lor B) \land (\neg B \lor A) $$
    $$ A \leftrightarrow B \Leftrightarrow (A \land B) \lor (\neg A \land \neg B) $$
14. **假言易位** (逆否命题)：
    $$ A \to B \Leftrightarrow \neg B \to \neg A $$
15. **等价否定等值式**：
    $$ A \leftrightarrow B \Leftrightarrow \neg A \leftrightarrow \neg B $$
16. **归谬论**：
    $$ (A \to B) \land (A \to \neg B) \Leftrightarrow \neg A $$

### 2.2 析取范式与合取范式

本节介绍如何将任意复杂的命题公式规范化为标准的格式。

#### 1. 基本构成概念
*   **文字 (Literal)**：命题变项及其否定统称为文字。
    *   例如：$p, \neg p, q, \neg q$ 都是文字。
*   **简单析取式**：由有限个文字构成的**析取式**（$\lor$ 连接）。
    *   例如：$p \lor \neg q \lor r$。
*   **简单合取式**：由有限个文字构成的**合取式**（$\land$ 连接）。
    *   例如：$p \land \neg q \land r$。
*   **性质**：
    *   简单析取式是重言式 $\Leftrightarrow$ 包含一对互补文字（如 $p$ 和 $\neg p$）。
    *   简单合取式是矛盾式 $\Leftrightarrow$ 包含一对互补文字。

#### 2. 范式的定义
*   **析取范式 (DNF)**：
    由有限个**简单合取式**构成的**析取式**。
    *   形式：$A_1 \lor A_2 \lor \dots \lor A_n$（其中每个 $A_i$ 都是简单合取式）。
    *   *解释*：它是“积之和”的形式（Sum of Products）。
*   **合取范式 (CNF)**：
    由有限个**简单析取式**构成的**合取式**。
    *   形式：$B_1 \land B_2 \land \dots \land B_n$（其中每个 $B_i$ 都是简单析取式）。
    *   *解释*：它是“和之积”的形式（Product of Sums）。

#### 3. 范式存在定理与求法
*   **定理**：任何命题公式都存在与之等值的析取范式和合取范式。
*   **求范式的通用步骤**：
    1.  **消去联结词**：利用等值式消去 $\to$ 和 $\leftrightarrow$。
    2.  **内移否定号**：利用双重否定律和德·摩根律，将 $\neg$ 移到命题变项的前面。
    3.  **使用分配律**：
        *   求析取范式：用 $\land$ 对 $\lor$ 的分配律。
        *   求合取范式：用 $\lor$ 对 $\land$ 的分配律。

### 2.3 主析取范式与主合取范式

范式不唯一，但**主范式**是唯一的，可以作为公式的“指纹”。

#### 1. 极小项 (Minterm)
*   **定义**：在含有 $n$ 个命题变项的简单合取式中，如果每个变项及其否定**恰好出现一次**，且按照特定顺序（如下标从小到大或字母顺序）排列，称该简单合取式为**极小项**。
*   **记号**：$m_i$。下标 $i$ 是该极小项成真赋值对应的二进制数。
    *   **成真赋值规则**：原变项对应 $1$，否定变项对应 $0$。
    *   例如 ($p, q$)：$p \land q$ 对应 $11 \to m_3$；$\neg p \land q$ 对应 $01 \to m_1$。
*   **性质**：
    *   每个极小项只有一种赋值使其为真（值=1），其余为假。
    *   $2^n$ 个极小项的析取为重言式（总和为1）。

#### 2. 极大项 (Maxterm)
*   **定义**：在含有 $n$ 个命题变项的简单析取式中，如果每个变项及其否定**恰好出现一次**，称该简单析取式为**极大项**。
*   **记号**：$M_i$。下标 $i$ 是该极大项成假赋值对应的二进制数。
    *   **成假赋值规则**：原变项对应 $0$，否定变项对应 $1$。
    *   例如 ($p, q$)：$p \lor q$ 对应 $00 \to M_0$；$\neg p \lor q$ 对应 $10 \to M_2$。
    *   *注意*：极大项的二进制规则与极小项是**相反**的。
*   **性质**：
    *   每个极大项只有一种赋值使其为假（值=0），其余为真。
    *   $2^n$ 个极大项的合取为矛盾式（总积为0）。

![含p，q的极小项与极大项](/img/post_article/离散数学/2.2.3-1.png)

#### 3. 极小项与极大项的关系
*   互补关系：$\neg m_i \Leftrightarrow M_i$。
*   否定关系：$\neg M_i \Leftrightarrow m_i$。

#### 4. 主范式的定义
*   **主析取范式**：
    如果一个公式的析取范式中，所有的简单合取式都是**极小项**，且不重复，则称之为主析取范式。
    *   表达式：$\sum m_{i, j, \dots}$。
    *   *本质*：列出真值表中所有结果为**真 (1)** 的行对应的极小项。
*   **主合取范式**：
    如果一个公式的合取范式中，所有的简单析取式都是**极大项**，且不重复，则称之为主合取范式。
    *   表达式：$\prod M_{i, j, \dots}$。
    *   *本质*：列出真值表中所有结果为**假 (0)** 的行对应的极大项。

#### 5. 主范式的用途
*   **唯一性**：任何命题公式的主范式是唯一的。
*   **判断类型**：
    *   **重言式**：主析取范式包含所有 $2^n$ 个极小项；主合取范式为空（或记为1）。
    *   **矛盾式**：主析取范式为空（或记为0）；主合取范式包含所有 $2^n$ 个极大项。
    *   **可满足式**：主析取范式至少包含一个极小项。
*   **相互转换**：
    若公式 $A$ 的主析取范式包含下标集合 $S$，则其主合取范式的下标集合为全集与 $S$ 的差集（即未出现的下标）。

### 2.4 联结词的完备集

本节讨论用最少的联结词表示所有可能的逻辑关系。

#### 1. 真值函数
*   $n$ 元真值函数：从 $\{0, 1\}^n$ 到 $\{0, 1\}$ 的映射。
*   $n$ 个命题变项可以构成 $2^{2^n}$ 个不同的真值函数。

#### 2. 联结词完备集
*   **定义**：如果一个联结词集合 $S$ 可以表示任何真值函数（即任何命题公式都能找到一个仅由 $S$ 中的联结词构成的等值公式），则称 $S$ 为**联结词完备集**。
*   **常见的完备集**：
    *   $\{\neg, \land, \lor\}$ (最常用的基础集)
    *   $\{\neg, \land, \lor, \to, \leftrightarrow\}$
    *   $\{\neg, \land\}$ (因为 $A \lor B \Leftrightarrow \neg(\neg A \land \neg B)$)
    *   $\{\neg, \lor\}$ (因为 $A \land B \Leftrightarrow \neg(\neg A \lor \neg B)$)
    *   $\{\neg, \to\}$ (因为 $A \lor B \Leftrightarrow \neg A \to B$)

#### 3. 只有一个联结词的完备集
有两个特殊的联结词，单独一个就能构成完备集：
*   **与非 ($\uparrow$, NAND)**：
    *   定义：$p \uparrow q \Leftrightarrow \neg(p \land q)$。
    *   性质：$\{\uparrow\}$ 是完备集。
*   **或非 ($\downarrow$, NOR)**：
    *   定义：$p \downarrow q \Leftrightarrow \neg(p \lor q)$。
    *   性质：$\{\downarrow\}$ 是完备集。

### 2.5 可满足性问题与消解法

本节介绍一种判定公式是否可满足（或是否为矛盾式）的机械化算法，常用于机器推理。

#### 1. 预备概念
*   **文字的补**：若 $l$ 是文字，$\neg l$ 是 $l$ 的补。
    *   若 $l=p$，则 $l^c = \neg p$；若 $l=\neg p$，则 $l^c = p$。
*   **空子句**：不含任何文字的简单析取式，记为 $\lambda$ 或 $\Box$。
    *   规定：空子句的真值为**假 (0)**（不可满足）。

#### 2. 消解规则 (Resolution Rule)
*   **定义**：设 $C_1, C_2$ 是两个简单析取式（子句），如果 $l \in C_1$ 且 $l^c \in C_2$（即一个包含某文字，另一个包含该文字的否定）。
    从 $C_1$ 中删去 $l$，从 $C_2$ 中删去 $l^c$，将剩余部分析取，得到的结果称为 $C_1$ 和 $C_2$ 的**消解式**，记为 $Res(C_1, C_2)$。
*   **公式**：
    $$ (A \lor l) \land (B \lor \neg l) \Rightarrow A \lor B $$
    这里 $A \lor B$ 就是消解式。
*   **逻辑含义**：如果 $C_1$ 和 $C_2$ 同时为真，那么消解式也必然为真。

#### 3. 消解算法判定可满足性
*   **定理**：合取范式 $S$ 是**不可满足的**（矛盾的），当且仅当可以通过消解规则从 $S$ 推导出**空子句 ($\lambda$)**。
*   **算法步骤**：
    1.  将公式化为合取范式，得到子句集 $S = \{C_1, C_2, \dots, C_n\}$。
    2.  在 $S$ 中寻找包含互补文字对的子句进行消解。
    3.  将产生的消解式加入集合 $S$。
    4.  重复上述过程。
    5.  **结论**：
        *   若推导出空子句，则原公式不可满足（是矛盾式）。
        *   若无法继续消解且未出现空子句，则原公式是可满足的。

## 第3章 命题逻辑的推理理论

本章的核心任务是：**不用真值表，而是通过“讲道理”（推理规则）来证明一个结论是正确的。**

### 3.1 推理的形式结构

#### 1. 推理的定义
*   **什么是推理**：从一组已知的命题公式（称为**前提**）出发，根据一定的规则，推导出另一个命题公式（称为**结论**）的过程。
*   **记号**：
    *   前提集合：$A_1, A_2, \dots, A_k$
    *   结论：$B$
    *   推理形式：$\{A_1, A_2, \dots, A_k\} \vdash B$

#### 2. 推理的有效性（正确性）
判定一个推理是否正确，并不看前提本身是否符合客观事实，而是看**逻辑结构**是否严谨。

*   **定义**：
    设 $A_1, \dots, A_k$ 为前提， $B$ 为结论。
    如果在**所有**可能的赋值情况下，**只要前提 $A_1 \land \dots \land A_k$ 全部为真，结论 $B$ 就一定为真**，那么称该推理是**有效的**（或正确的）。
*   **记作**：$\Gamma \vdash B$ （$\Gamma$ 代表前提集合）。
*   **若推理无效**：记作 $\Gamma \nvdash B$。这意味着存在至少一种情况：前提全是真的，但结论却是假的。

#### 3. 推理与重言式（永真式）的关系
这是判断推理是否正确的数学依据。

*   **定理**：
    推理 $\{A_1, \dots, A_k\} \vdash B$ 是正确的，**当且仅当** 蕴涵式 $A_1 \land A_2 \land \dots \land A_k \to B$ 是**重言式**。
*   **符号区别**：
    *   $\to$：蕴涵联结词（运算符号）。
    *   $\Rightarrow$：蕴涵关系（逻辑符号）。如果 $A \to B$ 是重言式，我们记作 $A \Rightarrow B$（读作 $A$ 蕴涵 $B$）。
*   **结论**：证明推理正确，就是证明 $A_1 \land \dots \land A_k \Rightarrow B$ 成立。

### 3.2 自然推理系统 P

为了不每次都画巨大的真值表，我们建立一套“自然推理系统”。在这个系统中，我们利用已知的**推理定律**作为工具来进行证明。

#### 1. 重要的推理定律（必须熟记的工具）
这些定律是推理的“积木”，可以直接使用。

1.  **附加律**：
    $$ A \Rightarrow (A \lor B) $$
    *   *解释*：如果 $A$ 是真的，那么“$A$ 或 $B$”肯定也是真的（不管 $B$ 是啥）。
2.  **化简律**：
    $$ (A \land B) \Rightarrow A $$
    *   *解释*：如果“$A$ 和 $B$”都是真的，那么 $A$ 肯定是真的。
3.  **假言推理 (Modus Ponens)** —— **最常用**：
    $$ (A \to B) \land A \Rightarrow B $$
    *   *解释*：如果“若 $A$ 则 $B$”成立，且 $A$ 发生了，那么 $B$ 一定发生。
4.  **拒取式 (Modus Tollens)**：
    $$ (A \to B) \land \neg B \Rightarrow \neg A $$
    *   *解释*：如果“若 $A$ 则 $B$”成立，且 $B$ 没有发生，那么 $A$ 一定没发生。
5.  **析取三段论**：
    $$ (A \lor B) \land \neg B \Rightarrow A $$
    *   *解释*：$A$ 和 $B$ 至少有一个是真的，现在 $B$ 是假的，那 $A$ 必须是真的。
6.  **假言三段论** (传递律)：
    $$ (A \to B) \land (B \to C) \Rightarrow (A \to C) $$
    *   *解释*：$A$ 导致 $B$，$B$ 导致 $C$，所以 $A$ 导致 $C$。
7.  **等价三段论**：
    $$ (A \leftrightarrow B) \land (B \leftrightarrow C) \Rightarrow (A \leftrightarrow C) $$
8.  **构造性二难推理**：
    $$ (A \to B) \land (C \to D) \land (A \lor C) \Rightarrow (B \lor D) $$
    *   *特殊形式*：$(A \to B) \land (\neg A \to B) \Rightarrow B$ （无论 $A$ 发生与否，$B$ 都发生）。
9.  **破坏性二难推理**：
    $$ (A \to B) \land (C \to D) \land (\neg B \lor \neg D) \Rightarrow (\neg A \lor \neg C) $$

#### 2. 系统 P 中的推导规则
在写证明过程时，我们可以使用以下规则：

*   **规则 P (Premise, 前提引入)**：
    在证明的任何步骤，都可以引入已知的前提。
*   **规则 T (Transformation, 变形/结论)**：
    如果前面的公式 $A_1, \dots, A_n$ 逻辑蕴涵 $B$（利用上面的9大定律或等值演算），则可以将 $B$ 作为新步骤引入。
*   **规则 CP (Conditional Proof, 附加前提/条件证明)**：
    *   **适用情况**：当结论是 $A \to B$ 这种形式时。
    *   **方法**：可以将 $A$（前件）暂时作为**附加前提**引入，然后只需要证明 $B$（后件）成立即可。
    *   *原理*：要证明 $P \Rightarrow (A \to B)$，等价于证明 $(P \land A) \Rightarrow B$。

#### 3. 常用的证明方法
1.  **直接证明法**：
    从前提出发，利用推理定律一步步推导，直到得出结论。
2.  **附加前提证明法 (CP法)**：
    如上所述，适用于结论是蕴涵式 ($A \to B$) 的情况。把 $A$ 当作已知条件去推 $B$。
3.  **归谬法 (反证法)**：
    *   **适用情况**：结论很难直接推出来，或者结论是否定式。
    *   **方法**：
        1. 假设**结论是假的**（即引入 $\neg 结论$ 作为前提）。
        2. 结合原有的前提进行推导。
        3. 如果推导出了**矛盾**（如 $R \land \neg R$ 或直接得出 $0$），说明假设错误。
        4. 既然“结论是假的”这个假设错误，那么**结论就是真的**。

### 3.3 消解证明法

这是一种非常机械化、适合计算机处理的证明方法（基于第2章的合取范式和消解规则）。

#### 1. 核心思想
基于**反证法**。要证明 $\{A_1, \dots, A_k\} \vdash B$，只需要证明 $\{A_1, \dots, A_k, \neg B\}$ 是**不可满足的**（即矛盾的）。

#### 2. 证明步骤
1.  **否定结论**：把结论 $B$ 的否定 $\neg B$ 加入到前提集合中。
2.  **化简为子句集**：把所有前提和 $\neg B$ 都化简为**合取范式**（CNF），并拆成一个个**子句**（简单析取式）。
    *   例如：$(p \lor q) \land \neg r$ 拆分为两个子句：$\{p \lor q\}$ 和 $\{\neg r\}$。
3.  **使用消解规则**：
    *   如果在两个子句中，分别包含互补的文字（例如一个有 $L$，另一个有 $\neg L$），则可以消去 $L$ 和 $\neg L$，将剩下的部分“拼”起来（析取）。
    *   公式：$(C_1 \lor L) \land (C_2 \lor \neg L) \Rightarrow C_1 \lor C_2$。
4.  **得出空子句**：
    *   如果不断消解，最后得到了**空子句**（记为 $\lambda$ 或 $\Box$，即“空”），说明发生了矛盾（因为空子句的真值默认为假）。
    *   一旦得出空子句，原推理得证。

#### 3. 示例逻辑（文字描述）
假设要证 $p \to q, p \vdash q$。
1.  否定结论：加入 $\neg q$。
2.  化为子句：
    *   $p \to q$ 变为 $\neg p \lor q$。
    *   $p$ 保持为 $p$。
    *   $\neg q$ 保持为 $\neg q$。
3.  消解：
    *   用 $p$ 和 $\neg p \lor q$ 消解（消去 $p$），得到 $q$。
    *   用得到的 $q$ 和 $\neg q$ 消解（消去 $q$），得到 **空子句**。
4.  结论：推理正确。


## 第4章 一阶逻辑基本概念

### 4.1 一阶逻辑命题符号化

一阶逻辑的表达能力比命题逻辑强，因为它引入了三个新要素：**个体词**、**谓词**和**量词**。

#### 1. 个体词 (Individual)
**定义**：指研究对象中可以独立存在的具体或抽象的客体（即“东西”或“人”）。

*   **个体常项**：表示具体或特定的客体。
    *   通常用小写英文字母表示：$a, b, c$ 等。
    *   *例子*：$a$ 表示“小王”，$b$ 表示“数字2”。
*   **个体变项**：表示抽象或泛指的客体。
    *   通常用小写英文字母表示：$x, y, z$ 等。
    *   *例子*：$x$ 表示“某个人”，$y$ 表示“任意一个数”。
*   **个体域 (Universe of Discourse)**：个体变项的取值范围。
    *   可以是有限集（如 $\{1, 2, 3\}$），也可以是无限集（如实数集 $\mathbb{R}$）。
    *   **全总个体域**：由宇宙间一切事物组成的集合。如果使用全总个体域，必须使用特定的“特性谓词”来限定范围（比如“人(x)”）。

#### 2. 谓词 (Predicate)
**定义**：用来刻画个体性质或个体之间关系的词。

*   **表示法**：通常用大写字母表示，如 $F, G, H$。
*   **元数**：
    *   **一元谓词**：$F(x)$。表示 $x$ 具有某种性质（例如“$x$ 是人”）。
    *   **n 元谓词**：$P(x_1, x_2, \dots, x_n)$。表示 $n$ 个客体之间存在某种关系（例如“$x$ 大于 $y$”写作 $G(x, y)$）。
    *   **0 元谓词**：不带个体变项的谓词。这其实就是**命题逻辑中的命题**（如“2是素数”）。

#### 3. 量词 (Quantifier)
用来表示个体数量关系的词。

*   **全称量词 ($\forall$)**：
    *   含义：表示“一切”、“所有的”、“每一个”、“凡是”。
    *   记法：$\forall x F(x)$。
    *   *读作*：对于所有的 $x$，$F(x)$ 都成立。
*   **存在量词 ($\exists$)**：
    *   含义：表示“存在”、“有一个”、“有的”、“至少有一个”。
    *   记法：$\exists x F(x)$。
    *   *读作*：存在一个 $x$，使得 $F(x)$ 成立。

#### 4. 符号化的重要规则（易错点）
在将自然语言翻译成逻辑公式时，有两个固定的搭配模式：

1.  **全称量词 $\forall$ 通常搭配 蕴涵词 $\to$**
    *   语句：“所有的人都是都要呼吸的。”
    *   设 $M(x)$：$x$是人，$F(x)$：$x$呼吸。
    *   **正确**：$\forall x (M(x) \to F(x))$
    *   *解释*：对于宇宙万物 $x$，如果它是人，那么它呼吸。
    *   *错误*：$\forall x (M(x) \land F(x))$ —— 这意为“宇宙万物都是人，并且都呼吸”。

2.  **存在量词 $\exists$ 通常搭配 合取词 $\land$**
    *   语句：“有人登上过月球。”
    *   设 $M(x)$：$x$是人，$G(x)$：$x$登过月球。
    *   **正确**：$\exists x (M(x) \land G(x))$
    *   *解释*：宇宙中存在一个 $x$，它既是人，又登过月球。
    *   *错误*：$\exists x (M(x) \to G(x))$ —— 这个式子太弱了，只要宇宙中有一个东西不是人，这个式子就为真，无法表达“有人”这层意思。

### 4.2 一阶逻辑公式及其解释

本节定义了一阶逻辑的语法规则（怎么写是对的）和语义规则（怎么判断真假）。

#### 1. 一阶语言 $\mathscr{L}$ 的字母表
要写出一阶逻辑公式，需要用到以下符号：
1.  **个体常项**：$a, b, c \dots$
2.  **函数符号**：$f, g, h \dots$ （用来表示运算，如 $f(x,y)$ 可以表示 $x+y$）
3.  **谓词符号**：$F, G, H \dots$
4.  **个体变项**：$x, y, z \dots$
5.  **量词**：$\forall, \exists$
6.  **联结词**：$\neg, \land, \lor, \to, \leftrightarrow$
7.  **标点符号**：括号、逗号。

#### 2. 项 (Term)
**定义**：在逻辑中代表“一个个体”的表达形式。
*   个体常项（如 $a$）是项。
*   个体变项（如 $x$）是项。
*   如果 $f$ 是 $n$ 元函数，$t_1 \dots t_n$ 是项，那么 $f(t_1, \dots, t_n)$ 也是项。
*   *通俗理解*：**“项”就是逻辑里的名词**，算出来结果是一个东西，而不是真假。

#### 3. 合式公式 (Well-Formed Formula, wff)
**定义**：符合语法规则的公式。
1.  **原子公式**：设 $F$ 是 $n$ 元谓词，$t_1 \dots t_n$ 是项，则 $F(t_1, \dots, t_n)$ 是原子公式。
2.  **复合公式**：
    *   若 $A$ 是公式，则 $\neg A$ 是公式。
    *   若 $A, B$ 是公式，则 $A \land B, A \lor B, A \to B, A \leftrightarrow B$ 都是公式。
    *   若 $A$ 是公式，$x$ 是变项，则 $\forall x A$ 和 $\exists x A$ 都是公式。

#### 4. 变项的“辖域”与“自由/约束”
在一个公式中，量词后面紧跟的变项受该量词控制。

*   **辖域 (Scope)**：量词的作用范围。通常是量词后面紧跟的括号内的部分，或者紧跟的最小子公式。
*   **指导变元**：量词符号（$\forall, \exists$）后面直接跟着的那个变量（如 $\forall x$ 中的 $x$）。
*   **约束变元 (Bound Variable)**：在辖域内，与指导变元相同的变项。它被量词“锁住”了。
*   **自由变元 (Free Variable)**：在辖域之外，或者在辖域内但与指导变元不同的变项。
*   *注意*：同一个变量名（如 $x$）在同一个公式中，可能在某处是约束的，在另一处是自由的（虽然不建议这样写，但语法允许）。
    *   *例*：$\forall x (F(x) \to G(y))$。
    *   $x$ 是约束变元（被 $\forall$ 锁住）。
    *   $y$ 是自由变元（没人管它）。

#### 5. 解释 (Interpretation)
公式本身只是一串符号，只有给了“解释”，它才有真假。
一个**解释 $I$** 包含两部分：
1.  **非空个体域 $D$**：指定我们在讨论什么范围的对象（如：自然数集 $\mathbb{N}$）。
2.  **指定含义**：
    *   为每个**常项**指定 $D$ 中的一个具体元素（如 $a=0$）。
    *   为每个**函数符号**指定一个具体的运算（如 $f(x,y) = x+y$）。
    *   为每个**谓词符号**指定一个具体的性质或关系（如 $F(x): x>5$）。

#### 6. 赋值 (Assignment/Valuation)
如果公式中含有**自由变元**（如 $G(y)$ 中的 $y$），光有解释还不够，还需要给自由变元赋值。
*   **赋值 $\sigma$**：给每个自由变元指定 $D$ 中的一个值。

**总结**：一个一阶逻辑公式的真值，取决于：**解释 $I$**（设定背景） + **赋值 $\sigma$**（给定自由变量的值）。

#### 7. 公式的分类
根据真值情况，公式分为三类：

1.  **永真式 (逻辑有效式)**：
    *   在**任何**解释和**任何**赋值下，真值都为**真 (T)**。
    *   *类比*：命题逻辑中的重言式。
2.  **矛盾式 (永假式)**：
    *   在**任何**解释和**任何**赋值下，真值都为**假 (F)**。
3.  **可满足式**：
    *   **至少存在**一个解释和一个赋值，使得真值为**真**。
    *   *注*：永真式一定是可满足式，但可满足式不一定是永真式。

#### 8. 代换实例 (Substitution Instance)
这是一个连接命题逻辑和一阶逻辑的桥梁。
*   **定义**：在命题公式 $A$ 中，用一阶逻辑的公式 $A_1, A_2 \dots$ 分别替换命题变项 $p_1, p_2 \dots$，所得的结果称为 $A$ 的代换实例。
*   **定理**：**重言式的代换实例一定是永真式。**
    *   *意义*：这说明命题逻辑里的所有推理定律（如双重否定、排中律等）在一阶逻辑里依然有效。
    *   *例如*：$p \lor \neg p$ 是重言式，那么 $\forall x F(x) \lor \neg \forall x F(x)$ 也就是永真式。

## 第5章 一阶逻辑等值演算与推理

### 5.1 一阶逻辑等值式与置换规则

这一节主要给出在推导中可以替换使用的公式模版。

#### 1. 等值的定义
*   **定义**：设 $A, B$ 是两个一阶逻辑公式，如果 $A \leftrightarrow B$ 是**永真式**（逻辑有效式），则称 $A$ 与 $B$ **等值**。
*   **记作**：$A \Leftrightarrow B$。
*   **代换实例**：命题逻辑中所有的重言式（如双重否定律、德摩根律等），在一阶逻辑中依然成立。

#### 2. 量词否定等值式（德·摩根律的量词版）
想要把否定号 $\neg$ 移到量词里面，量词必须翻转。
$$ \neg \forall x A(x) \Leftrightarrow \exists x \neg A(x) $$
$$ \neg \exists x A(x) \Leftrightarrow \forall x \neg A(x) $$
*   *解释*：“并非所有人都是好人” 等价于 “存在一个坏人”。

#### 3. 量词辖域的收缩与扩张（重要！）
当公式的一部分**不包含**约束变项 $x$ 时，我们可以把量词提到括号外面，或者放进括号里面。
设 $A(x)$ 是含 $x$ 的公式，**$B$ 是不含 $x$ 的公式**，则有：

*   **析取 ($\lor$) 与 合取 ($\land$) 的规则**：
    $$ \forall x (A(x) \lor B) \Leftrightarrow (\forall x A(x)) \lor B $$
    $$ \forall x (A(x) \land B) \Leftrightarrow (\forall x A(x)) \land B $$
    $$ \exists x (A(x) \lor B) \Leftrightarrow (\exists x A(x)) \lor B $$
    $$ \exists x (A(x) \land B) \Leftrightarrow (\exists x A(x)) \land B $$
    *   *总结*：只要 $B$ 里面没有 $x$，量词 $\forall$ 和 $\exists$ 对 $\lor$ 和 $\land$ 都可以随意进出。

*   **蕴涵 ($\to$) 的规则（极易出错）**：
    1.  **$B$ 在后件**（量词在前件，提出来要变号）：
        $$ \forall x A(x) \to B \Leftrightarrow \exists x (A(x) \to B) $$
        $$ \exists x A(x) \to B \Leftrightarrow \forall x (A(x) \to B) $$
        *   *注意*：当把量词从 $\to$ 的**左边**提到整个式子最前面时，$\forall$ 变 $\exists$，$\exists$ 变 $\forall$。这是因为 $P \to Q \Leftrightarrow \neg P \lor Q$，否定号作用在左边，根据量词否定律，符号要变。

    2.  **$B$ 在前件**（量词在后件，提出来不变号）：
        $$ B \to \forall x A(x) \Leftrightarrow \forall x (B \to A(x)) $$
        $$ B \to \exists x A(x) \Leftrightarrow \exists x (B \to A(x)) $$

#### 4. 量词分配等值式
这里讨论的是 $A(x)$ 和 $B(x)$ **都含有 $x$** 的情况。

*   **完全分配（可以拆开）**：
    $$ \forall x (A(x) \land B(x)) \Leftrightarrow \forall x A(x) \land \forall x B(x) $$
    $$ \exists x (A(x) \lor B(x)) \Leftrightarrow \exists x A(x) \lor \exists x B(x) $$
    *   *解释*：“大家都得考满分且拿奖学金” 等于 “大家都考满分 且 大家都拿奖学金”。

*   **不完全分配（不能拆开）**：
    *   $\forall$ 对 $\lor$ **不能**分配：$\forall x (A(x) \lor B(x)) \not\Leftrightarrow \forall x A(x) \lor \forall x B(x)$。
    *   $\exists$ 对 $\land$ **不能**分配：$\exists x (A(x) \land B(x)) \not\Leftrightarrow \exists x A(x) \land \exists x B(x)$。

#### 5. 两个重要规则
1.  **置换规则**：如果是等值的，可以互相替换（同命题逻辑）。
2.  **换名规则**：
    *   公式中的约束变项符号（如 $x$）可以换成其他符号（如 $y$），只要不引起混淆。
    *   例如：$\forall x F(x) \Leftrightarrow \forall y F(y)$。
    *   *注意*：换名时，辖域内所有该变项都要换，且不能与已有的自由变项重名。

### 5.2 一阶逻辑前束范式

为了统一公式的形式，方便计算机处理或理论研究，我们将所有量词都提到公式的最左边。

#### 1. 定义
一个公式如果具有如下形式：
$$ Q_1 x_1 Q_2 x_2 \dots Q_k x_k B $$
其中：
*   $Q_i$ 是量词 ($\forall$ 或 $\exists$)。
*   $x_i$ 是个体变项。
*   $B$ 是**不含任何量词**的公式（称为母式）。
则称该公式为**前束范式**。

#### 2. 定理
**任何**一阶逻辑公式都可以化成一个与之等值的**前束范式**。

#### 3. 求前束范式的步骤
1.  **消去联结词**：将 $\to$ 和 $\leftrightarrow$ 转化为 $\neg, \land, \lor$。
2.  **内移否定号**：利用德·摩根律和量词否定律，将 $\neg$ 移到所有量词的后面，直到紧贴原子公式。
3.  **变项换名**：如果有量词用了相同的变量名（例如两个 $\forall x$ 在不同子式中），或者约束变项与自由变项重名，必须用**换名规则**把它们改成不同的名字。
4.  **外提量词**：利用5.1节中的“量词辖域扩张规则”，把所有量词提到公式最左边。

### 5.3 一阶逻辑的推理理论

本节主要解决如何在一阶逻辑中进行形式化证明。除了命题逻辑的推理规则（如P规则、T规则、假言推理等），一阶逻辑增加了4条处理量词的规则。

#### 1. 核心思想
*   **消去量词**：把带量词的公式变成不带量词的公式（剥皮）。
*   **命题推理**：在不带量词的层面进行逻辑推导。
*   **引入量词**：把推导结果重新加上量词（穿衣）。

#### 2. 四个关键推理规则
*(注：以下规则中，$A(x)$ 表示含 $x$ 的公式，$c$ 表示个体常项，$y$ 表示个体变项)*

**1. 全称量词消去规则 (Universal Instantiation, UI / $\forall -$ )**
*   **规则**：如果 $\forall x A(x)$ 为真，那么对于个体域中**任意**一个个体 $c$（或变项 $y$），$A(c)$（或 $A(y)$）都为真。
*   **格式**：
    $$ \frac{\forall x A(x)}{\therefore A(c)} \quad \text{或} \quad \frac{\forall x A(x)}{\therefore A(y)} $$
*   *通俗解释*：既然“大家都对”，那么“特定的你”肯定也对。
*   *条件*：代入的项必须是合法的（自由的）。

**2. 全称量词引入规则 (Universal Generalization, UG / $\forall +$ )**
*   **规则**：如果能证明 $A(y)$ 对**任意**个体 $y$ 都成立，那么可以推出 $\forall x A(x)$。
*   **格式**：
    $$ \frac{A(y)}{\therefore \forall x A(x)} $$
*   *通俗解释*：如果在推导中 $y$ 只是个代号，没受任何特殊限制，那么结论对所有人都适用。
*   **严格限制**（易错点）：
    *   $y$ 必须是**任意**的。如果 $y$ 在前提中出现过，或者 $y$ 是由存在量词消去($\exists -$)得到的，那么 $y$ 就是“特定的”，不能使用此规则。

**3. 存在量词消去规则 (Existential Instantiation, EI / $\exists -$ )**
*   **规则**：如果 $\exists x A(x)$ 为真，我们可以假设有一个**特定的常项** $c$ 使得 $A(c)$ 为真。
*   **格式**：
    $$ \frac{\exists x A(x)}{\therefore A(c)} $$
*   *通俗解释*：既然“有人考了100分”，那我把这个人叫作 $c$。
*   **严格限制**（易错点）：
    *   $c$ 必须是一个**新**的常项，之前在推导过程中不能出现过。不能假设这个 $c$ 就是大家都知道的某人（除非你不管他是谁，单纯给那个人起个代号叫 $c$）。

**4. 存在量词引入规则 (Existential Generalization, EG / $\exists +$ )**
*   **规则**：如果对于某个个体 $c$（或 $y$），$A(c)$ 为真，那么 $\exists x A(x)$ 为真。
*   **格式**：
    $$ \frac{A(c)}{\therefore \exists x A(x)} $$
*   *通俗解释*：只要找到一个例子，就可以说“存在”。

#### 3. 推理时的注意事项
1.  **顺序很重要**：如果同时有 $\forall x$ 和 $\exists x$ 需要消去，通常**先消去 $\exists$ (EI规则)**，再消去 $\forall$ (UI规则)。
    *   *原因*：EI 规则要求引入“新”变量。如果先消去 $\forall$ 得到了某个变量，再消去 $\exists$ 时就不能用同一个变量了，这会阻碍后续推导。
2.  **换名**：在使用量词规则时，注意不要与已有的变量名冲突。