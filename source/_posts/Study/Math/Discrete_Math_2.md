---
title: 离散数学（2）：集合论
categories:
  - Study
  - Math
comments: true
description: 离散数学第二部分：集合论
series: 离散数学笔记
hide: true
mathjax: false
katex: true
highlight_shrink: true
cover: /img/posts/离散数学.avif
abbrlink: ec2a0184
date: 2025-11-27 00:00:00
updated: 2025-11-27 00:00:00
keywords:
top_img:
aside:
aplayer:
---

## 第6章 集合代数

### 6.1 集合的基本概念

#### 1. 集合与元素
*   **集合 (Set)**：把一些事物汇集到一起组成的一个整体。集合本身是一个不能精确定义的基本概念。
*   **元素 (Element)**：组成集合的这些事物。
*   **记号**：
    *   集合通常用大写字母表示（如 $A, B, C$）。
    *   元素通常用小写字母表示（如 $a, b, c$）。
*   **隶属关系**：
    *   **属于**：若 $a$ 是集合 $A$ 的元素，记作 $a \in A$。
    *   **不属于**：若 $a$ 不是集合 $A$ 的元素，记作 $a \notin A$。

#### 2. 集合的表示法
1.  **列元素法**：将集合的所有元素列出来，用逗号分隔，花括号括起来。
    *   例如：$A = \{a, b, c\}$。
2.  **谓词表示法**：用谓词来概括集合中元素的属性。
    *   格式：$B = \{ x \mid P(x) \}$。
    *   读作：$B$ 是所有满足性质 $P(x)$ 的 $x$ 组成的集合。

#### 3. 集合的特性
*   **互异性**：集合中的元素是彼此不同的。如果列举时重复出现（如 $\{1, 2, 2\}$），应认为是一个元素（即 $\{1, 2\}$）。
*   **无序性**：集合中的元素没有顺序（如 $\{1, 2, 3\} = \{3, 1, 2\}$）。
*   **元素可以是集合**：一个集合的元素也可以是另一个集合。
    *   *注意区分*：$a \in \{a\}$ 是成立的，但 $a = \{a\}$ 通常不成立。

#### 4. 集合间的关系
*   **子集 (Subset)**：
    *   **定义**：如果集合 $B$ 的**每一个**元素都是集合 $A$ 的元素，则称 $B$ 是 $A$ 的子集。
    *   **记作**：$B \subseteq A$ （读作 $B$ 包含于 $A$，或 $A$ 包含 $B$）。
    *   **符号语言**：$B \subseteq A \Leftrightarrow \forall x (x \in B \rightarrow x \in A)$。
    *   **性质**：任何集合都是其自身的子集（$A \subseteq A$）。

*   **相等 (Equality)**：
    *   **定义**：如果 $A$ 和 $B$ 的元素完全相同。
    *   **判定**：$A$ 是 $B$ 的子集，且 $B$ 也是 $A$ 的子集。
    *   **符号语言**：$A = B \Leftrightarrow (A \subseteq B \land B \subseteq A)$。

*   **真子集 (Proper Subset)**：
    *   **定义**：如果 $B$ 是 $A$ 的子集，并且 $A$ 中**至少有一个**元素不属于 $B$（即 $A \neq B$），则称 $B$ 是 $A$ 的真子集。
    *   **记作**：$B \subset A$。
    *   **符号语言**：$B \subset A \Leftrightarrow (B \subseteq A \land B \neq A)$。

#### 5. 特殊集合
*   **空集 (Empty Set)**：
    *   **定义**：不含任何元素的集合。
    *   **记作**：$\varnothing$。
    *   **性质**：空集是**一切**集合的子集（$\varnothing \subseteq A$）。空集是唯一的。
    *   *注意*：$\{\varnothing\}$ 不是空集，它是一个含有一个元素（该元素是空集）的集合。

*   **全集 (Universal Set)**：
    *   **定义**：在特定研究范围内，包含所有讨论对象的集合。
    *   **记作**：$E$ （有的教材记作 $U$）。
    *   **性质**：对于任何集合 $A$，都有 $A \subseteq E$。

*   **幂集 (Power Set)**：
    *   **定义**：设 $A$ 为集合，把 $A$ 的**全体子集**构成的集合称为 $A$ 的幂集。
    *   **记作**：$P(A)$ 或 $2^A$。
    *   **符号语言**：$P(A) = \{ x \mid x \subseteq A \}$。
    *   **元素个数**：若集合 $A$ 有 $n$ 个元素（$|A|=n$），则 $P(A)$ 有 $2^n$ 个元素。
    *   *例子*：若 $A=\{1, 2\}$，则 $P(A) = \{ \varnothing, \{1\}, \{2\}, \{1, 2\} \}$。

### 6.2 集合的运算

#### 1. 基本运算定义
设 $A, B$ 为两个集合：

1.  **并集 (Union)**
    *   **定义**：由属于 $A$ **或者** 属于 $B$ 的所有元素组成的集合。
    *   **符号**：$A \cup B$
    *   **公式**：$A \cup B = \{ x \mid x \in A \lor x \in B \}$

2.  **交集 (Intersection)**
    *   **定义**：由既属于 $A$ **又** 属于 $B$ 的所有公共元素组成的集合。
    *   **符号**：$A \cap B$
    *   **公式**：$A \cap B = \{ x \mid x \in A \land x \in B \}$
    *   **不交**：若 $A \cap B = \varnothing$，则称 $A$ 与 $B$ 不交（或互不相容）。

3.  **相对补集 / 差集 (Difference)**
    *   **定义**：由属于 $A$ 但**不属于** $B$ 的元素组成的集合。
    *   **符号**：$A - B$ （有时记作 $A \setminus B$）
    *   **公式**：$A - B = \{ x \mid x \in A \land x \notin B \}$

4.  **绝对补集 (Complement)**
    *   **定义**：相对于全集 $E$，所有不属于 $A$ 的元素组成的集合。
    *   **符号**：$\sim A$ （或 $A^c$, $\overline{A}$）
    *   **公式**：$\sim A = E - A = \{ x \mid x \in E \land x \notin A \}$

5.  **对称差集 (Symmetric Difference)**
    *   **定义**：属于 $A$ 或属于 $B$，但**不同时**属于两者的元素集合（即“非公有”元素）。
    *   **符号**：$A \oplus B$
    *   **公式**：
        *   定义1：$A \oplus B = (A - B) \cup (B - A)$
        *   定义2：$A \oplus B = (A \cup B) - (A \cap B)$

#### 2. 广义并与广义交
当有多个集合（甚至无穷多个）进行运算时：

*   **广义并** ($\bigcup$)：只要元素属于**至少一个**集合，就属于广义并。
    *   $\bigcup_{i=1}^{n} A_i = A_1 \cup A_2 \cup \dots \cup A_n = \{ x \mid \exists i (1 \le i \le n \land x \in A_i) \}$
*   **广义交** ($\bigcap$)：元素必须属于**每一个**集合，才属于广义交。
    *   $\bigcap_{i=1}^{n} A_i = A_1 \cap A_2 \cap \dots \cap A_n = \{ x \mid \forall i (1 \le i \le n \rightarrow x \in A_i) \}$

### 6.3 有穷集的计数

#### 1. 文氏图 (Venn Diagram)
*   用平面上的封闭曲线（通常是圆）内部区域表示集合。
*   用矩形表示全集 $E$。
*   用于直观地表示集合间的关系和运算结果。

![文氏图](/img/post_article/离散数学/6.3.1-1.png)

#### 2. 包含排斥原理 (Inclusion-Exclusion Principle)
用于计算多个集合并集的元素个数（基数）。记 $|A|$ 为集合 $A$ 的元素个数。

*   **两个集合**：
    $$ |A \cup B| = |A| + |B| - |A \cap B| $$
    *   *解释*：把 $A$ 加一遍，$B$ 加一遍，中间重叠的部分（交集）被加了两次，所以要减去一次。

*   **三个集合**：
    $$ |A \cup B \cup C| = |A| + |B| + |C| - (|A \cap B| + |B \cap C| + |C \cap A|) + |A \cap B \cap C| $$
    *   *解释*：加单个，减两两交，加三三交。

*   **n 个集合（通用公式）**：
    $$ |\bigcup_{i=1}^n A_i| = \sum |A_i| - \sum |A_i \cap A_j| + \sum |A_i \cap A_j \cap A_k| - \dots + (-1)^{n-1} |A_1 \cap \dots \cap A_n| $$
    *   *规律*：奇数个集合的交集取“+”，偶数个集合的交集取“-”。

### 6.4 集合恒等式

集合运算满足一系列代数定律，这些定律与命题逻辑的等值式非常相似。
设 $A, B, C$ 为任意集合，$E$ 为全集，$\varnothing$ 为空集。

#### 1. 基本定律（必须熟记）

1.  **幂等律**：
    $$ A \cup A = A $$
    $$ A \cap A = A $$
2.  **结合律**：
    $$ (A \cup B) \cup C = A \cup (B \cup C) $$
    $$ (A \cap B) \cap C = A \cap (B \cap C) $$
3.  **交换律**：
    $$ A \cup B = B \cup A $$
    $$ A \cap B = B \cap A $$
4.  **分配律** (极重要)：
    $$ A \cup (B \cap C) = (A \cup B) \cap (A \cup C) $$
    $$ A \cap (B \cup C) = (A \cap B) \cup (A \cap C) $$
5.  **同一律**：
    $$ A \cup \varnothing = A $$
    $$ A \cap E = A $$
6.  **零律 (支配律)**：
    $$ A \cup E = E $$
    $$ A \cap \varnothing = \varnothing $$
7.  **排中律** (互补律的一部分)：
    $$ A \cup \sim A = E $$
8.  **矛盾律** (互补律的一部分)：
    $$ A \cap \sim A = \varnothing $$
9.  **吸收律**：
    $$ A \cup (A \cap B) = A $$
    $$ A \cap (A \cup B) = A $$
10. **德·摩根律 (De Morgan's Laws)**：
    $$ \sim (A \cup B) = \sim A \cap \sim B $$
    $$ \sim (A \cap B) = \sim A \cup \sim B $$
    *   *口诀*：补集进括号，符号并变交，交变并。
11. **双重否定律**：
    $$ \sim (\sim A) = A $$

#### 2. 其他重要等式
*   **差集与补集的关系** (证明题常用)：
    $$ A - B = A \cap \sim B $$
*   **包含关系的等价形式**：
    以下几个式子是等价的：
    1.  $A \subseteq B$
    2.  $A \cap B = A$
    3.  $A \cup B = B$
    4.  $A - B = \varnothing$
    5.  $\sim B \subseteq \sim A$

#### 3. 证明集合相等的方法
要证明 $A = B$，通常有以下几种方法：
1.  **双向包含法**：分别证明 $A \subseteq B$ 且 $B \subseteq A$。
2.  **命题演算法**：利用 $x \in A \Leftrightarrow \dots \Leftrightarrow x \in B$，将集合运算转化为逻辑运算，利用逻辑等值式进行推导。
3.  **集合演算法**：直接利用上述的“集合恒等式”进行代数变形。
4.  **隶属表法**：类似于真值表，列出元素属于各个集合的所有可能情况（0表示不属于，1表示属于），验证两边结果是否一致。

## 第7章 二元关系

### 7.1 有序对与笛卡儿积

#### 1. 有序对 (Ordered Pair)
*   **定义**：由两个元素 $x$ 和 $y$ 按照**一定顺序**排列成的二元组。
*   **记作**：$\langle x, y \rangle$。
    *   $x$ 是第一元素，$y$ 是第二元素。
*   **性质**：
    1.  **有序性**：如果 $x \neq y$，那么 $\langle x, y \rangle \neq \langle y, x \rangle$。
    2.  **相等条件**：两个有序对相等，当且仅当对应的元素都相等。
        $$ \langle x, y \rangle = \langle u, v \rangle \Leftrightarrow (x = u \land y = v) $$

#### 2. 笛卡儿积 (Cartesian Product)
*   **定义**：设 $A, B$ 为集合，用 $A$ 中元素为第一元素，$B$ 中元素为第二元素，构成的**所有**可能的有序对的集合。
*   **记作**：$A \times B$。
*   **公式**：
    $$ A \times B = \{ \langle x, y \rangle \mid x \in A \land y \in B \} $$
*   **基数（元素个数）**：如果 $|A| = m, |B| = n$，则 $|A \times B| = m \cdot n$。
*   **性质**：
    *   **不满足交换律**：$A \times B \neq B \times A$ （除非 $A=B$ 或其中之一为空集）。
    *   **不满足结合律**：$(A \times B) \times C \neq A \times (B \times C)$。
    *   **对并/交运算满足分配律**：
        $$ A \times (B \cup C) = (A \times B) \cup (A \times C) $$
        $$ A \times (B \cap C) = (A \times B) \cap (A \times C) $$
    *   **零律**：$A \times \varnothing = \varnothing \times A = \varnothing$。

### 7.2 二元关系

#### 1. 关系的定义
*   **定义**：一个集合如果满足以下条件之一，就称为**二元关系**（简称关系）：
    1.  集合非空，且它的元素都是有序对。
    2.  集合是空集 ($\varnothing$)。
*   **本质**：**关系 $R$ 是笛卡儿积 $A \times B$ 的一个子集** ($R \subseteq A \times B$)。
*   **记法**：
    *   如果 $\langle x, y \rangle \in R$，记作 $x R y$ （读作 $x$ 与 $y$ 有关系 $R$）。
    *   如果 $\langle x, y \rangle \notin R$，记作 $x \not\kern-0.2em R y$。

#### 2. 特殊的关系类型
*   **$A$ 到 $B$ 的关系**：$R \subseteq A \times B$。
*   **$A$ 上的关系**：$R \subseteq A \times A$ （即起点和终点都在同一个集合 $A$ 中）。
*   **关系的个数**：如果 $|A|=n$，则 $A$ 上不同的二元关系共有 $2^{n^2}$ 个。

#### 3. 几个特殊的“A上的关系”
设 $A$ 为任意集合：
1.  **空关系**：$\varnothing$ （没有任何元素有关系）。
2.  **全域关系**：$E_A = A \times A$ （所有元素之间都有关系）。
3.  **恒等关系**：$I_A = \{ \langle x, x \rangle \mid x \in A \}$ （每个元素只和自己有关系）。
    *   *注意*：恒等关系在矩阵中对应单位矩阵。

#### 4. 关系的表示方法
除了集合表达式，还可以用直观的方式表示有限集合上的关系：
1.  **关系矩阵 (Relation Matrix) $M_R$**：
    *   用 $0$ 和 $1$ 组成的矩阵表示。
    *   若 $x_i R x_j$，则第 $i$ 行第 $j$ 列为 $1$，否则为 $0$。
2.  **关系图 (Relation Graph) $G_R$**：
    *   用点表示集合中的元素。
    *   若 $x R y$，则画一条从 $x$ 指向 $y$ 的**有向边**。

### 7.3 关系的运算

#### 1. 基本集合运算
由于关系本质上是**集合**（有序对的集合），所以集合的所有运算（并 $\cup$、交 $\cap$、差 $-$、补 $\sim$）都适用于关系。

#### 2. 专门的关系运算
设 $R$ 是二元关系：

**(1) 域 (Domain/Range/Field)**
*   **定义域 (dom R)**：所有“出发点”构成的集合（有序对的第一元素）。
    $$ \text{dom} R = \{ x \mid \exists y (\langle x, y \rangle \in R) \} $$
*   **值域 (ran R)**：所有“终点”构成的集合（有序对的第二元素）。
    $$ \text{ran} R = \{ y \mid \exists x (\langle x, y \rangle \in R) \} $$
*   **域 (fld R)**：定义域和值域的并集。
    $$ \text{fld} R = \text{dom} R \cup \text{ran} R $$

**(2) 逆关系 (Inverse Relation)**
*   **定义**：把关系 $R$ 中所有有序对的**顺序颠倒**过来得到的新关系。
*   **记作**：$R^{-1}$。
*   **公式**：
    $$ R^{-1} = \{\langle y, x \rangle \mid \langle x, y \rangle \in R\} $$
*   **性质**：
    1.  $(R^{-1})^{-1} = R$
    2.  $\text{dom}(R^{-1}) = \text{ran}R$
    3.  $\text{ran}(R^{-1}) = \text{dom}R$
    4.  $(R \cup S)^{-1} = R^{-1} \cup S^{-1}$
    5.  $(R \cap S)^{-1} = R^{-1} \cap S^{-1}$
    6.  $(A \times B)^{-1} = B \times A$


**(3) 复合/合成 (Composition)**
*   **定义**：设 $F$ 是 $A$ 到 $B$ 的关系，$G$ 是 $B$ 到 $C$ 的关系。$F$ 与 $G$ 的合成记作 $F \circ G$（注意有的教材记作 $G \circ F$，本书定义为右复合，即先 $F$ 后 $G$）。
*   **公式**：
    $$ F \circ G = \{\langle x, y \rangle \mid \exists t (\langle x, t \rangle \in F \land \langle t, y \rangle \in G)\} $$
*   **直观理解**：
    从 $x$ 出发，先通过关系 $F$ 到达中间点 $t$，再从 $t$ 出发通过关系 $G$ 到达 $y$。如果存在这样的“中转站” $t$，那么 $x$ 和 $y$ 就构成了合成关系中的一对。
*   **性质**：
    1.  **结合律**：$(F \circ G) \circ H = F \circ (G \circ H)$。
    2.  **不满足交换律**：一般情况下 $F \circ G \neq G \circ F$。
    3.  **逆运算**：$(F \circ G)^{-1} = G^{-1} \circ F^{-1}$ （注意顺序颠倒）。
    4.  **对并运算的分配律**：
        *   $F \circ (G \cup H) = (F \circ G) \cup (F \circ H)$
        *   $(G \cup H) \circ F = (G \circ F) \cup (H \circ F)$
    5.  **对交运算的分配律不一定成立**，只有包含关系：
        *   $F \circ (G \cap H) \subseteq (F \circ G) \cap (F \circ H)$

**(4) 限制与像**
*   **限制 (Restriction)**：
    设 $R$ 是 $A$ 上的关系，$E$ 是 $A$ 的子集。$R$ 在 $E$ 上的限制记作 $R \upharpoonright E$。
    *   公式：$R \upharpoonright E = \{\langle x, y \rangle \mid x R y \land x \in E\}$。
    *   *含义*：只保留出发点在集合 $E$ 里的那些关系对。
    *   *等价式*：$R \upharpoonright E = R \cap (E \times A)$。
*   **像 (Image)**：
    设 $R$ 是 $A$ 上的关系，$E$ 是 $A$ 的子集。$E$ 在 $R$ 下的像记作 $R[E]$。
    *   公式：$R[E] = \{y \mid \exists x (x \in E \land x R y)\}$。
    *   *含义*：集合 $E$ 中的元素通过关系 $R$ 能“射”到的所有目标元素的集合。
    *   *等价式*：$R[E] = \text{ran}(R \upharpoonright E)$。

**(5) 关系的幂 (Powers)**
*   **定义**：设 $R$ 是 $A$ 上的关系，$n$ 是自然数。$R$ 的 $n$ 次幂 $R^n$ 定义如下：
    1.  $R^0 = I_A = \{\langle x, x \rangle \mid x \in A\}$ （恒等关系）。
    2.  $R^{n+1} = R^n \circ R$。
*   **直观意义**：
    *   $R^1 = R$：一步可达。
    *   $R^2 = R \circ R$：两步可达（中间经过 1 个点）。
    *   $R^n$：恰好经过 $n$ 步（中间经过 $n-1$ 个点）可达的关系。
*   **性质**：
    1.  $R^m \circ R^n = R^{m+n}$。
    2.  $(R^m)^n = R^{mn}$。
*   **计算方法**：
    如果有 $R$ 的关系矩阵 $M$，那么 $R^n$ 的关系矩阵就是 $M$ 的 $n$ 次方（使用逻辑矩阵乘法，即加法变逻辑或 $\lor$，乘法变逻辑与 $\land$）。

### 7.4 关系的性质

设 $R$ 是集合 $A$ 上的关系，以下是 $R$ 可能具有的5种重要性质：

#### 1. 自反性 (Reflexive)
*   **定义**：每个元素都和自己有关系。
*   **公式**：$\forall x (x \in A \rightarrow \langle x, x \rangle \in R)$。
*   **集合表达式**：$I_A \subseteq R$
*   **特征**：
    *   关系矩阵：主对角线全为 $1$。
    *   关系图：每个顶点都有自环。

#### 2. 反自反性 (Irreflexive)
*   **定义**：没有任何元素和自己有关系。
*   **公式**：$\forall x (x \in A \rightarrow \langle x, x \rangle \notin R)$。
*   **集合表达式**： $R \cap I_A = \varnothing $
*   **特征**：
    *   关系矩阵：主对角线全为 $0$。
    *   关系图：每个顶点都没有自环。
*   *注意*：如果不满足自反，不一定就是反自反（可能有的有环，有的没环）。

#### 3. 对称性 (Symmetric)
*   **定义**：如果有 $x \to y$，就一定有 $y \to x$（双向奔赴）。
*   **公式**：$\forall x \forall y (\langle x, y \rangle \in R \rightarrow \langle y, x \rangle \in R)$。
*   **集合表达式**： $ R = R^{-1} $
*   **特征**：
    *   关系矩阵：关于主对角线对称 ($M = M^T$)。
    *   关系图：两点之间如果有边，必须是双向边（或无边）。

#### 4. 反对称性 (Antisymmetric)
*   **定义**：如果 $x$ 和 $y$ 互有关系，那它们必须是同一个元素。换句话说，两个**不同**的元素之间，不能同时存在双向关系（要么没有，要么只有单向）。
*   **公式**：$\forall x \forall y ((\langle x, y \rangle \in R \land \langle y, x \rangle \in R) \rightarrow x = y)$。
*   **集合表达式**： $R \cap R^{-1} \subseteq I_A$
*   **特征**：
    *   关系矩阵：对于 $i \neq j$，如果 $m_{ij}=1$，则必须 $m_{ji}=0$。
    *   关系图：两个不同顶点之间最多只有一条单向边。

#### 5. 传递性 (Transitive)
*   **定义**：如果 $x \to y$ 且 $y \to z$，那么 $x \to z$（朋友的朋友是朋友）。
*   **公式**：$\forall x \forall y \forall z ((\langle x, y \rangle \in R \land \langle y, z \rangle \in R) \rightarrow \langle x, z \rangle \in R)$。
*   **集合表达式**: $ R \circ R \subseteq R $
*   **特征**：
    *   关系矩阵：$M^2$ 中的非零位置，在 $M$ 中也是非零。
    *   关系图：如果存在 $x$ 到 $z$ 的间接路径，则必须直接有一条边 $x \to z$。

### 7.5 关系的闭包 (Closure)

#### 1. 闭包的概念
*   **定义**：如果关系 $R$ 不具有某种性质（如自反性），我们希望**添加最少**的有序对，使其具有该性质。这个包含了 $R$ 且具有该性质的最小关系，称为 $R$ 的闭包。

#### 2. 三种常见闭包及其求法
设 $R$ 是 $A$ 上的关系：

**(1) 自反闭包 (Reflexive Closure)**
*   **记号**：$r(R)$
*   **目标**：让每个元素都有自环（$xRx$）。
*   **构造方法**：把缺失的自环 $\langle x, x \rangle$ 全部补上。
*   **集合公式**：
    $$ r(R) = R \cup I_A $$
    *   其中 $I_A = \{ \langle x, x \rangle \mid x \in A \}$ 是恒等关系。
*   **矩阵表示**：
    $$ M_{r(R)} = M_R \lor E $$
    *   即：把关系矩阵的主对角线全部置为 1（$E$ 为单位矩阵）。

**(2) 对称闭包 (Symmetric Closure)**
*   **记号**：$s(R)$
*   **目标**：把所有的单向路变成双向路。如果有 $x \to y$，必须补上 $y \to x$。
*   **构造方法**：把 $R$ 的逆关系 $R^{-1}$ 并进去。
*   **集合公式**：
    $$ s(R) = R \cup R^{-1} $$
*   **矩阵表示**：
    $$ M_{s(R)} = M_R \lor M_R^T $$
    *   即：矩阵 $M$ 与其转置矩阵 $M^T$ 进行逻辑加。

**(3) 传递闭包 (Transitive Closure)**
*   **记号**：$t(R)$ 或 $R^+$
*   **目标**：只要 $x$ 能（通过任意步）走到 $y$，就直接连一条边 $x \to y$。
*   **构造方法**：把一步可达、两步可达、三步可达……的所有关系都并起来。
*   **集合公式**：
    $$ t(R) = R \cup R^2 \cup R^3 \cup \dots $$
*   **有限集定理**：如果 $|A| = n$，则只需并到 $n$ 次幂即可。
    $$ t(R) = \bigcup_{i=1}^n R^i = R \cup R^2 \cup \dots \cup R^n $$
    *   *解释*：如果 $x$ 到 $y$ 有路，必然存在一条长度不超过 $n$ 的简单路径。超过 $n$ 的路径一定包含环，可以简化。

#### 3.闭包的性质
1.  **包含性**：$R \subseteq r(R)$，$R \subseteq s(R)$，$R \subseteq t(R)$。
2.  **幂等性**：如果 $R$ 已经具有性质 $P$，则其闭包就是它自己。
    *   $R$ 自反 $\iff r(R) = R$。
    *   $R$ 对称 $\iff s(R) = R$。
    *   $R$ 传递 $\iff t(R) = R$。
    *   且有 $r(r(R)) = r(R)$（闭包再求闭包还是闭包）。
3.  **单调性**：若 $R_1 \subseteq R_2$，则 $r(R_1) \subseteq r(R_2)$（对称、传递同理）。
4.  **复合闭包的顺序**：
    *   $rs(R) = sr(R)$ （先自反再对称 = 先对称再自反）。
    *   $rt(R) = tr(R)$。
    *   **注意**：$st(R) \subseteq ts(R)$，通常它们不相等。
    *   **等价关系的生成**：$tsr(R)$ 是包含 $R$ 的最小的等价关系。

#### 4. 传递闭包的计算方法
计算 $t(R)$ 主要有两种方法。

**方法一：矩阵幂法 (Matrix Powers)**
利用公式 $t(R) = \bigcup_{i=1}^n R^i$。
1.  设 $M$ 是 $R$ 的关系矩阵。
2.  计算 $M^2, M^3, \dots, M^n$（使用逻辑矩阵乘法）。
3.  将所有矩阵进行逻辑加：$T = M \lor M^2 \lor \dots \lor M^n$。
*   *缺点*：计算量极大，复杂度 $O(n^4)$。

**方法二：沃舍尔算法 (Warshall Algorithm)**
一种专门用于计算机计算传递闭包的高效算法（复杂度 $O(n^3)$）。

*   **核心思想**：
    依次考察每个节点 $v_k$ 作为“中间跳板”。
    如果已知 $v_i \to v_k$ 且 $v_k \to v_j$，则添加新边 $v_i \to v_j$。

*   **算法步骤**：
    设 $M$ 为初始关系矩阵（$n \times n$）。
    进行 $n$ 轮迭代，第 $k$ 轮（$k$ 从 1 到 $n$）更新矩阵：
    
    对于矩阵中的每一个元素 $m_{ij}$：
    $$ m_{ij}^{(k)} = m_{ij}^{(k-1)} \lor (m_{ik}^{(k-1)} \land m_{kj}^{(k-1)}) $$
    
    *   **通俗解释**：
        第 $k$ 次循环时，我们允许路径中间经过第 $1, \dots, k$ 个节点。
        检查：当前 $i$ 到 $j$ 是否已经连通？或者，是否可以通过第 $k$ 个点中转连通（即 $i \to k$ 且 $k \to j$）？如果是，记为 1。

*   **手算技巧**（针对第 $k$ 列）：
    在第 $k$ 步时，观察矩阵的 **第 $k$ 列** 和 **第 $k$ 行**。
    1.  找到第 $k$ 列中所有为 1 的行 $i$（即能到达 $k$ 的点）。
    2.  找到第 $k$ 行中所有为 1 的列 $j$（即从 $k$ 出发能到的点）。
    3.  将位置 $(i, j)$ 填为 1。
    4.  *口诀*：列里找 1，行里找 1，交叉点补 1。

### 7.6 等价关系与划分

#### 1. 等价关系 (Equivalence Relation)
*   **定义**：如果一个关系 $R$ 同时满足以下三个性质：
    1.  **自反性**
    2.  **对称性**
    3.  **传递性**
    则称 $R$ 为等价关系。
*   **记作**：$x \sim y$ （表示 $x$ 和 $y$ 等价）。
*   *例子*：“等于”、“同余”、“同姓”、“住在同一个城市”。

#### 2. 等价类 (Equivalence Class)
*   **定义**：在等价关系 $R$ 下，与元素 $x$ 有关系的所有元素组成的集合，称为 $x$ 的等价类。
*   **记作**：$[x]_R$ 或简写为 $[x]$。
*   **公式**：$[x]_R = \{ y \mid y \in A \land x R y \}$。
*   **性质**：
    *   $[x]$ 非空（至少包含 $x$ 自己）。
    *   如果 $x R y$，则 $[x] = [y]$ （它们的圈子完全一样）。
    *   如果 $x$ 和 $y$ 没关系，则 $[x] \cap [y] = \varnothing$ （圈子完全不沾边）。

#### 3. 商集 (Quotient Set)
*   **定义**：集合 $A$ 上所有不同的等价类组成的集合。
*   **记作**：$A/R$。
*   **形式**：$A/R = \{ [x]_R \mid x \in A \}$。
*   *例子*：整数集 $\mathbb{Z}$ 模3的同余关系，商集为 $\{ \{0,3,6\dots\}, \{1,4,7\dots\}, \{2,5,8\dots\} \}$。

#### 4. 划分 (Partition)
*   **定义**：把集合 $A$ 分割成若干个非空子集，使得：
    1.  每个子集非空。
    2.  子集之间互不相交。
    3.  所有子集的并集等于 $A$。
*   **定理**：
    *   **等价关系诱导划分**：任何等价关系的商集 $A/R$ 就是 $A$ 的一个划分。
    *   **划分诱导等价关系**：给定 $A$ 的一个划分，一定存在唯一的等价关系，使得其等价类刚好就是这些划分块。
    *   **结论**：**等价关系**与**划分**是一一对应的。

### 7.7 偏序关系 (Partial Ordering)

#### 1. 偏序关系的定义
*   **定义**：如果一个关系 $R$ 同时满足以下三个性质：
    1.  **自反性**
    2.  **反对称性**（注意：这里与等价关系不同，是反对称不是对称）
    3.  **传递性**
    则称 $R$ 为偏序关系。
*   **记作**：$\le$ （注意：这只是个符号，不一定代表数字大小）。
*   **偏序集 (Poset)**：集合 $A$ 和定义在它上面的偏序关系 $\le$ 一起构成的二元组，记作 $\langle A, \le \rangle$。
*   *例子*：实数上的“小于等于 $\le$”、集合间的“包含 $\subseteq$”、正整数上的“整除”。

#### 2. 可比性
*   **可比**：对于 $x, y$，如果 $x \le y$ 或 $y \le x$ 成立，称 $x$ 和 $y$ 是可比的。
*   **全序关系 (Total Order)**：如果集合中**任意**两个元素都是可比的，则称该关系为全序关系（或线序关系）。

#### 3. 哈斯图 (Hasse Diagram)
一种简化的关系图，专门用于表示偏序集。
*   **画法规则**：
    1.  省去自环（因为自反性是默认的）。
    2.  省去传递边（如果 $x \to y, y \to z$，则不画 $x \to z$）。
    3.  **方向隐含**：把图画成“下小上大”的层级结构，省去箭头。如果 $x \le y$，则 $x$ 画在 $y$ 的下方（直接或间接相连）。
*   **覆盖**：如果 $x \le y$ 且中间没有其他元素（即不存在 $z$ 使得 $x \le z \le y$），称 $y$ **覆盖** $x$。哈斯图中只画覆盖边。

#### 4. 偏序集中的特殊元素
设 $\langle A, \le \rangle$ 为偏序集， $B$ 是 $A$ 的子集。

**(1) 极值元素（局部概念）**
*   **极大元 (Maximal)**：在 $B$ 中，没有比它更大的元素（它是某个分支的顶端）。
    *   *注意*：极大元可以有多个。
*   **极小元 (Minimal)**：在 $B$ 中，没有比它更小的元素（它是某个分支的底端）。

**(2) 最值元素（全局概念）**
*   **最大元 (Maximum)**：在 $B$ 中，存在一个元素 $b$，使得 $B$ 中**所有**其他元素都比它小 ($x \le b$)。
    *   *注意*：最大元如果存在，一定是唯一的。通常很多偏序集没有最大元（因为有多个山头）。
*   **最小元 (Minimum)**：在 $B$ 中，存在一个元素 $b$，使得 $B$ 中**所有**其他元素都比它大 ($b \le x$)。

**(3) 界（针对子集 B）**
*   **上界 (Upper Bound)**：$A$ 中的元素 $a$，如果对于 $B$ 中所有元素 $x$，都有 $x \le a$。
    *   **最小上界 / 上确界 (Supremum/LUB)**：所有上界中最小的那个。
*   **下界 (Lower Bound)**：$A$ 中的元素 $a$，如果对于 $B$ 中所有元素 $x$，都有 $a \le x$。
    *   **最大下界 / 下确界 (Infimum/GLB)**：所有下界中最大的那个。

## 第8章 函数

### 8.1 函数的定义与性质

#### 1. 函数的基本定义
函数是一种特殊的**二元关系**。

*   **定义**：设 $F$ 为二元关系，如果对于定义域 $\text{dom}F$ 中的**每一个**元素 $x$，都存在**唯一**的一个 $y \in \text{ran}F$ 使得 $xFy$（即 $\langle x, y \rangle \in F$）成立，则称 $F$ 为**函数**（或映射）。
*   **记作**：$y = F(x)$。
*   **术语**：$y$ 称为 $x$ 在 $F$ 下的**像**（或值），$x$ 称为 $y$ 在 $F$ 下的**原像**。
*   **核心特征**：
    1.  **单值性**：一个输入只能对应一个输出。
    2.  **全定义性**：定义域内的每个元素都必须有输出。

#### 2. 函数的相等
由于函数是集合（有序对的集合），函数的相等即集合的相等。
*   **条件**：两个函数 $F$ 和 $G$ 相等 ($F=G$)，当且仅当：
    1.  它们的定义域相同 ($\text{dom}F = \text{dom}G$)。
    2.  对于定义域中的每一个 $x$，对应的函数值相同 ($F(x) = G(x)$)。

#### 3. 从 $A$ 到 $B$ 的函数
*   **定义**：设 $A, B$ 为集合，如果 $f$ 是函数，且满足：
    1.  $\text{dom}f = A$ （定义域是 $A$ 的全部）。
    2.  $\text{ran}f \subseteq B$ （值域包含于 $B$）。
    则称 $f$ 是**从 $A$ 到 $B$ 的函数**。
*   **记作**：$f: A \to B$。
*   **术语**：
    *   $A$ 称为**定义域** (Domain)。
    *   $B$ 称为**陪域** (Codomain)。
    *   $f(A) = \{ f(x) \mid x \in A \}$ 称为**值域** (Range)，它是 $B$ 的子集。

#### 4. 函数集合 $B^A$
*   **定义**：所有从 $A$ 到 $B$ 的函数构成的集合。
*   **记作**：$B^A = \{ f \mid f: A \to B \}$。
*   **基数（数量）**：如果 $|A|=m, |B|=n$，且 $m, n > 0$，则 $|B^A| = n^m$。
    *   *记忆*：每个 $A$ 中的元素都有 $n$ 种选择，共有 $m$ 个元素，所以是 $n \times n \times \dots \times n$ ($m$ 次)。

#### 5. 像与完全原像
设 $f: A \to B$，且 $A_1 \subseteq A, B_1 \subseteq B$。
*   **像 (Image)**：集合 $A_1$ 中所有元素的函数值组成的集合。
    $$ f(A_1) = \{ f(x) \mid x \in A_1 \} $$
    *   *特例*：$f(A)$ 就是函数的值域。
*   **完全原像 (Inverse Image)**：集合 $B_1$ 中所有元素的原像组成的集合。
    $$ f^{-1}(B_1) = \{ x \mid x \in A \land f(x) \in B_1 \} $$
    *   *注意*：这里 $f^{-1}$ 并不是反函数，而是表示一种集合运算。即使 $f$ 不可逆，完全原像也是存在的。

#### 6. 函数的类型（满射、单射、双射）
这是函数最重要的分类性质。

| 类型 | 名称 | 定义 | 直观理解 |
| :--- | :--- | :--- | :--- |
| **满射** | Surjection / Onto | $\text{ran}f = B$ | **陪域无剩余**。<br>B 中的每个元素至少被 A 中的一个元素射中。 |
| **单射** | Injection / One-to-One | $\forall x_1, x_2 \in A, f(x_1)=f(x_2) \Rightarrow x_1=x_2$ | **不撞车**。<br>不同的输入一定对应不同的输出。 |
| **双射** | Bijection | 既是满射又是单射 | **一一对应**。<br>A 和 B 的元素完美配对，不多不少。 |

#### 7. 特殊函数
*   **常函数**：对于所有 $x \in A$，都有 $f(x) = c$（$c$ 是固定值）。
*   **恒等函数**：$I_A: A \to A$，对所有 $x \in A$，有 $I_A(x) = x$。
*   **特征函数**：设 $A$ 是全集 $E$ 的子集，$\chi_A: E \to \{0, 1\}$。
    *   若 $x \in A$，$\chi_A(x) = 1$。
    *   若 $x \notin A$，$\chi_A(x) = 0$。
*   **自然映射**：设 $R$ 是 $A$ 上的等价关系，$g: A \to A/R$ 定义为 $g(a) = [a]_R$（把元素映射到它所属的等价类）。自然映射通常是满射。

### 8.2 函数的复合与反函数

#### 1. 函数的复合 (Composition)
*   **定义**：设 $F, G$ 是函数，它们的复合 $F \circ G$ 也是函数。
*   **顺序说明（重要）**：
    本书沿用二元关系的复合定义（**左复合**），即 $F \circ G$ 表示**先进行 $F$，后进行 $G$**。
*   **公式**：
    $$ (F \circ G)(x) = G(F(x)) $$
    *   *注意*：这与微积分中常用的 $(g \circ f)(x) = g(f(x))$ 符号顺序相反，请务必根据 $F$ 和 $G$ 的定义域和值域来判断顺序。
*   **存在条件**：要使 $f \circ g$ 有意义，必须满足 $\text{ran}f \subseteq \text{dom}g$（$f$ 的输出必须在 $g$ 的输入范围内）。
*   **性质**：
    *   **结合律**：$(f \circ g) \circ h = f \circ (g \circ h)$。
    *   **保性**：
        *   两个满射的复合是满射。
        *   两个单射的复合是单射。
        *   两个双射的复合是双射。

#### 2. 反函数 (Inverse Function)
*   **定义**：设 $f: A \to B$ 是函数，其逆关系 $f^{-1}$ 称为 $f$ 的反函数。
*   **存在条件**：
    *   $f^{-1}$ 是函数的充要条件是：**$f$ 是双射**（既是单射又是满射）。
    *   如果 $f$ 只是单射但不是满射，$f^{-1}$ 只是从 $\text{ran}f$ 到 $A$ 的函数，而不是从 $B$ 到 $A$ 的函数。
*   **性质**：
    *   $f^{-1} \circ f = I_A$ （先过去再回来，回到原点）。
    *   $f \circ f^{-1} = I_B$。
    *   $(f^{-1})^{-1} = f$。

### 8.3 双射函数与集合的基数

本节利用双射来比较集合的大小（基数），特别是无穷集合的大小。

#### 1. 集合的等势 (Equipotence)
*   **定义**：如果集合 $A$ 和 $B$ 之间存在一个**双射**函数，则称 $A$ 与 $B$ **等势**（或基数相同）。
*   **记作**：$A \approx B$。
*   **性质**：等势关系是等价关系（满足自反性、对称性、传递性）
*   **重要实例**：
    *   $\mathbb{N} \approx \mathbb{Z}$ （自然数与整数一样多）
    *   $\mathbb{N} \approx \mathbb{Q}$ （自然数与有理数一样多）
    *   $\mathbb{N} \times \mathbb{N} \approx \mathbb{N}$
    *   $(0, 1) \approx \mathbb{R}$ （开区间与全体实数一样多）
    *   $[0, 1] \approx (0, 1)$
    *   $[0, 1] \approx [a, b]$

#### 2. 优势与劣势 (Dominance)
设 $A, B$ 是两个集合。
1.  **优势于**：如果存在一个从 $A$ 到 $B$ 的**单射函数** (Injection)，则称集合 $B$ **优势于** $A$（或者说 $A$ 的势小于等于 $B$）。
    *   **记作**：$A \preccurlyeq B$。
2.  **真优势于**：如果 $A \preccurlyeq B$（存在单射），但是 **$A \not\approx B$**（不存在双射），则称 $B$ **真优势于** $A$（或者说 $A$ 的势严格小于 $B$）。
    *   **记作**：$A \prec B$。
    *   *例子*：自然数集 $\mathbb{N}$ 和实数集 $\mathbb{R}$。我们可以把每个自然数映射到实数轴上（单射），但无法把实数轴上的所有点一一对应给自然数（不存在双射），所以 $\mathbb{N} \prec \mathbb{R}$。

#### 3. 两个重要定理
1.  **康托尔定理 (Cantor's Theorem)**：
    $\mathbb{N} \not\approx \mathbb{R}$ 
    对于任意集合 $A$，都有 $A \prec P(A)$。
    *   *含义*：集合的幂集（所有子集的集合）的基数总是严格大于原集合的基数。这意味着不存在最大的集合。

2.  **康托尔-施罗德-伯恩斯坦定理 (Cantor-Schroder-Bernstein Theorem)**：
    设 $A, B$ 是集合，如果 $A \preccurlyeq B$ 且 $B \preccurlyeq A$，则 $A \approx B$。
    *   *作用*：要证明两个集合一样大，只需分别找到彼此的一个单射即可，不需要直接构造复杂的双射。

#### 4. 空集与后继
我们用集合来从无到有地构造数字：
1.  **0 的定义**：规定空集 $\varnothing$ 就是 $0$。
2.  **后继 $n^+$ 的定义**：对于任意集合 $n$，它的后继 $n^+ = n \cup \{n\}$。
    *   **1**：$0^+ = 0 \cup \{0\} = \varnothing \cup \{\varnothing\} = \{\varnothing\} = \{0\}$。
    *   **2**：$1^+ = 1 \cup \{1\} = \{0\} \cup \{1\} = \{0, 1\}$。
    *   **3**：$2^+ = 2 \cup \{2\} = \{0, 1\} \cup \{2\} = \{0, 1, 2\}$。
*   *本质*：自然数 $n$ 就是一个包含 $n$ 个元素的集合，这 $n$ 个元素分别是 $0, 1, \dots, n-1$。

#### 5. 基数 (Cardinal Numbers)
用来度量集合“大小”的数。记作 $\text{card}A$ 或 $|A|$。

*   **有穷集 (Finite Set)**：
    如果一个集合 $A$ 与某个自然数 $n$（作为集合）**等势**（即存在双射），则称 $A$ 是有穷集。
    *   例如：集合 $A=\{a, b, c\}$ 与自然数 $3=\{0, 1, 2\}$ 等势，所以 $A$ 是有穷集。
*   **无穷集 (Infinite Set)**：
    如果一个集合不是有穷集，它就是无穷集。
    *   更本质的特征：一个集合是无穷的，当且仅当它可以与它的一个**真子集**等势（例如偶数和整数一样多）。

**三类重要的基数符号：**
1.  **有穷基数**：
    *   $\text{card}A = n$。就是我们普通的计数。
2.  **阿列夫零 ($\aleph_0$, Aleph-null)**：
    *   **定义**：自然数集 $\mathbb{N}$ 的基数。
    *   $\text{card}\mathbb{N} = \aleph_0$。
    *   这是**最小的**无穷基数。整数集 $\mathbb{Z}$、有理数集 $\mathbb{Q}$ 的基数都是 $\aleph_0$。
3.  **阿列夫 ($\aleph$ 或 $\mathfrak{c}$)**：
    *   **定义**：实数集 $\mathbb{R}$ 的基数（也叫连续统势）。
    *   $\text{card}\mathbb{R} = \aleph$。
    *   **关系**：$\aleph = 2^{\aleph_0}$。
    *   *解释*：实数集的多少，等于自然数集幂集（所有子集）的多少。

设 $A, B$ 为集合，$\kappa = \text{card}A, \lambda = \text{card}B$。
1.  **相等**：$\kappa = \lambda \iff A \approx B$（存在双射）。
2.  **小于等于**：$\kappa \le \lambda \iff A \preccurlyeq B$（存在单射）。
3.  **严格小于**：$\kappa < \lambda \iff A \prec B$（存在单射但不存在双射）。

**重要的基数不等式**：
$$ n < \aleph_0 < \aleph < 2^\aleph < \dots $$
*   自然数 ($\aleph_0$) 是无穷里最少的。
*   实数 ($\aleph$) 比自然数多。
*   实数的幂集 ($2^\aleph$) 比实数还多。

*   **定义**：如果一个集合 $A$ 的基数 **小于等于** $\aleph_0$（即 $|A| \le \aleph_0$），则称 $A$ 为**可数集**。
*   **分类**：
    1.  **有穷集**：$|A| = n$。当然可数。
    2.  **可数无穷集**：$|A| = \aleph_0$。即与自然数 $\mathbb{N}$ 等势的集合。
        *   *特征*：里面的元素可以排成一队：$a_1, a_2, a_3, \dots$（可以编号）。
*   **不可数集**：
    *   如果 $|A| > \aleph_0$，则称 $A$ 为不可数集。
    *   最典型的例子是实数集 $\mathbb{R}$ 及其子区间 $(0, 1)$。

**可数集的重要性质**
1.  **子集**：可数集的任一子集都是可数集。
2.  **并集**：两个可数集的并集是可数集；甚至**可数无穷多个**可数集的并集还是可数集。
    *   *直观理解*：无穷个无穷加起来，还是那一档次的无穷（只要是可数的）。
3.  **笛卡儿积**：两个可数集的笛卡儿积是可数集。
    *   例如：$\mathbb{N} \times \mathbb{N}$ 是可数的（可以用康托尔对角线法证明）。
    *   推论：有理数集 $\mathbb{Q}$ 是可数的（因为分数 $p/q$ 对应有序对）。
